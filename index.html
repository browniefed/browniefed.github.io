
<!doctype html>
<!-- START OF _layouts/default.html -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" >
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<meta content="" name="description">
		<meta content="JavaScript Without Grammar" name="author">
		
		<title>JavaScript Without Grammar</title>
		
		<!-- Styles -->
		<link href="/stylesheets/main.css" rel="stylesheet">
		
		<!-- Google webfonts -->
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Cousine">
		
		<!-- jQuery and plugins -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script src="/js/jquery.zclip.min.js"></script>
		
		<!-- Syntax highlighter -->
		<link href="/stylesheets/prettify-hemisu.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="/js/prettify.js"></script>
		
		<!--<link href="http://feeds.feedburner.com/turkeltaub" rel="alternate" title="JavaScript Without Grammar" type="application/rss+xml" />-->
		
	</head>
	<body onload="prettyPrint()">
	
		<div class="wrap">
	
			<header>
				<div class="title"><a href="/">JavaScript Without Grammar</a></div>
								
								<div class="navi">
									<ul>
										<li><a href="/">Blog</a></li>
										<li><a href="/blog/archives">Archives</a></li>
										<li><a href="/about">About</a></li>
										<li><a href="http://github.com/browniefed">Github</a></li>
										<li><a href="http://twitter.com/browniefed">Twitter</a></li>
										<li><a href="http://browniefed.com">Portfolio?</a></li>
									<ul>
								</div> <!-- // .navi -->
			</header>
		
				<!-- START OF index.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/06/01/css-layout-and-react-art/">CSS-Layout and React-Art</a></h1>
		<time>01 June 2015</time>
	</header>
	<div class="content">
		<h3>Intro</h3>

<p>If you&rsquo;ve used <code>react-native</code> before then you may know that &ldquo;css&rdquo; you&rsquo;re writing isn&rsquo;t actually CSS. It&rsquo;s a descriptor for a layout engine. That layout engine is <a href="https://github.com/facebook/css-layout">css-layout</a> which was created by <a href="https://twitter.com/Vjeux">@vjeux</a> and compiled to Java/Objective-C.</p>

<p>Layout is difficult. There have been attempts at various constraint based layouts in JavaScript, <a href="http://gridstylesheets.org/">GSS</a> is one of those. Which is a port of Apples <code>Cassowary</code> constraint solver which was also ported to JavaScript <a href="https://github.com/slightlyoff/cassowary.js">https://github.com/slightlyoff/cassowary.js</a>.</p>

<p>Now this is all fine and well but from the bit I&rsquo;ve read constraints fall down sometimes. This usually happens when you don&rsquo;t specify enough constraints based on the current layout.</p>

<h3>Layout is hard!</h3>

<p>Parent layouts get effected by their child layouts. CSS is weird in that you can remove items from layout with <code>position: absolute</code> but ultimately the top parent <code>width/height</code> is directly effected by it&rsquo;s children.</p>

<p>This is an over simplification but many times in <code>React</code> you have to hook into <code>componentDidMount</code> get the child width and take action.</p>

<p>An example would be even width labels in a form. We could measure the text but depending on <code>font</code>, <code>font-size</code> it could measure each value differently. So we hide the form on initial render, get the max label width and set it on state.</p>

<h3>CSS-Layout Basics</h3>

<p>It takes a subset of flexbox and some other styling parameters and returns <code>width</code>, and the <code>left/top</code> offsets for each item and it&rsquo;s children.</p>

<p>This example is taken directly from the <code>css-layout</code> git repo.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>computeLayout(
</span><span class='line'>  {style: {padding: 50}, children: [
</span><span class='line'>    {style: {padding: 10, alignSelf: 'stretch'}}
</span><span class='line'>  ]}
</span><span class='line'>);
</span><span class='line'>// =&gt;
</span><span class='line'>{
</span><span class='line'>    width: 120,
</span><span class='line'>    height: 120,
</span><span class='line'>    top: 0,
</span><span class='line'>    left: 0,
</span><span class='line'>    children: [{
</span><span class='line'>        width: 20,
</span><span class='line'>        height: 20,
</span><span class='line'>        top: 50,
</span><span class='line'>        left: 50
</span><span class='line'>    }]
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>So explaining this. We have an item with a padding of <code>50</code>, so <code>50px</code> around the entire item.</p>

<p>It&rsquo;s child item has a padding of <code>10</code>, so <code>10px</code> all the way around.</p>

<p>Therefore the parent has <code>50*2 = 100</code> initial width/height. Now we take into account the children.</p>

<p>Width/Height:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Parent: `50*2 = 100` +  `10*2 = 20` = `100 + 120`
</span><span class='line'>Child: `10*2 = 20`</span></code></pre></td></tr></table></div></figure>


<p>Position:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Parent: `x = 0, y = 0` since we are starting there.
</span><span class='line'>Child: Parent padding `50` so our child is inset at `x = 50, y = 50`</span></code></pre></td></tr></table></div></figure>


<p>Lets change the child width and see what happens</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>computeLayout(
</span><span class='line'>    {
</span><span class='line'>        style: {
</span><span class='line'>            padding: 50
</span><span class='line'>        },
</span><span class='line'>        children: [{
</span><span class='line'>            style: {
</span><span class='line'>                padding: 10,
</span><span class='line'>                width: 1000,
</span><span class='line'>                alignSelf: 'stretch'
</span><span class='line'>            }
</span><span class='line'>        }]
</span><span class='line'>    }
</span><span class='line'>);
</span><span class='line'>// =&gt;
</span><span class='line'>{
</span><span class='line'>    "width": 1100,
</span><span class='line'>    "height": 120,
</span><span class='line'>    "top": 0,
</span><span class='line'>    "left": 0,
</span><span class='line'>    "children": [{
</span><span class='line'>        "width": 1000,
</span><span class='line'>        "height": 20,
</span><span class='line'>        "top": 50,
</span><span class='line'>        "left": 50
</span><span class='line'>    }]
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Because our child defined a width of <code>1000</code> we then add on our <code>50*2</code> of padding on both sides and now the parent has a width of <code>1100</code>.</p>

<p>There are some other nuances that you can read about in the <code>css-layout</code> repo.</p>

<h3>Basic Example</h3>

<p>First off we&rsquo;ll need a component tree. Now in React they transpile JSX, and build the component tree for us. However in our case we can just create a JSON tree.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var componentTree = {
</span><span class='line'>    style: {
</span><span class='line'>        padding: 10
</span><span class='line'>    },
</span><span class='line'>    component: Rectangle,
</span><span class='line'>    children: [{
</span><span class='line'>        style: {
</span><span class='line'>            padding: 10,
</span><span class='line'>            flexDirection: 'column',
</span><span class='line'>            alignItems: 'center'
</span><span class='line'>        },
</span><span class='line'>        component: Rectangle,
</span><span class='line'>        children: [
</span><span class='line'>            {
</span><span class='line'>                style: {
</span><span class='line'>                    width: 30,
</span><span class='line'>                    height: 30
</span><span class='line'>                },
</span><span class='line'>                component: Rectangle
</span><span class='line'>            },
</span><span class='line'>            {
</span><span class='line'>                style: {
</span><span class='line'>                    margin: 10,
</span><span class='line'>                    width: 50,
</span><span class='line'>                    height: 50,
</span><span class='line'>                    alignItems: 'center',
</span><span class='line'>                    justifyContent: 'center'
</span><span class='line'>                },
</span><span class='line'>                component: Circle,
</span><span class='line'>                children: [
</span><span class='line'>                    {
</span><span class='line'>                        style: {
</span><span class='line'>                            width: 10,
</span><span class='line'>                            height: 10
</span><span class='line'>                        },
</span><span class='line'>                        component: Circle
</span><span class='line'>                    }
</span><span class='line'>                ]
</span><span class='line'>            }
</span><span class='line'>        ]
</span><span class='line'>    }]
</span><span class='line'>};
</span></code></pre></td></tr></table></div></figure>


<p>We add a <code>component</code> parameter to the tree. This is the thing that will be rendered.
We could add additional properties here, maybe create custom renderers but we&rsquo;ll keep it simple.</p>

<p>The break down is like so</p>

<ul>
<li>A surrounding rectangle w/ <code>10px</code> of padding all around</li>
<li>1 child that is a rectangle with another <code>10px</code> of padding, and it&rsquo;s children in a <code>column</code> based layout.</li>
<li>We align each of the items in the <code>center</code></li>
<li>2 children one a Rectangle, one a Cirlce.</li>
<li>Rectangle = <code>width = 30, height = 30</code></li>
<li>Circle = <code>width = 50, height = 50</code> and a surrounding <code>10px</code> margin and it&rsquo;s children centered vertically and horizontally</li>
<li>That cirlce has a circle inside that is <code>width = 10</code> and `height = 10
We&rsquo;ll have to do some basic math on the Circle to compute the radius, and center it correctly.</li>
</ul>


<p>Now we&rsquo;ll need to traverse the layout.
We&rsquo;ll do that with a function that calls itself</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function traverseLayout(componentTree, layout) {
</span><span class='line'>    var Component = componentTree.component;
</span><span class='line'>    return (
</span><span class='line'>        &lt;Group x={layout.left} y={layout.top}&gt;
</span><span class='line'>            &lt;Component
</span><span class='line'>                {...getProps(Component, layout)}
</span><span class='line'>             /&gt;
</span><span class='line'>             &lt;Group x={0} y={0}&gt;
</span><span class='line'>                {
</span><span class='line'>                    !componentTree.children ? null : componentTree.children.map(function(child, index) {
</span><span class='line'>                        return traverseLayout(child, layout.children[index]);
</span><span class='line'>                    })
</span><span class='line'>
</span><span class='line'>                }
</span><span class='line'>             &lt;/Group&gt;
</span><span class='line'>        &lt;/Group&gt;
</span><span class='line'>    )
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>This is a super crude layout renderer but it works for our purposes.</p>

<p>It creates a group and we pass in our <code>top/left</code> to <code>x/y</code> of the group. This is necessary to make our children <code>top/left</code> work correctly.
Then renders the component with selected props. We&rsquo;ll just render <code>stroke="#000"</code> and a stroke={1}.</p>

<p>Then if we have children we will call ourself with the child component and layout.</p>

<p>To process the props we need to render different props for specific components.</p>

<p><code>Rectangle</code> needs <code>width/height</code> which we have.
<code>Circle</code> needs the radius computed, and to then be ofset by the radius. So we just divide the <code>width/2</code> and for positioning <code>y</code> we divide the <code>height/2</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function getProps(component, layout) {
</span><span class='line'>
</span><span class='line'>    var props = {
</span><span class='line'>        x: 0,
</span><span class='line'>        y: 0
</span><span class='line'>    };
</span><span class='line'>
</span><span class='line'>    if (Rectangle === component) {
</span><span class='line'>        props.width = layout.width;
</span><span class='line'>        props.height = layout.height;
</span><span class='line'>
</span><span class='line'>    } else if (Circle === component) {
</span><span class='line'>        props.radius = layout.width/2;
</span><span class='line'>        props.x += (layout.width/2)
</span><span class='line'>        props.y += (layout.height/2);
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    props.stroke = "#000"; // Just to visualize
</span><span class='line'>    props.strokeWidth = 1; // Just to visualize
</span><span class='line'>    return props;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>That is it, now we can render a tree of <code>Rectangles</code> and <code>Circles</code>. The complete code is below.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react');
</span><span class='line'>var ReactArt = require('react-art'),
</span><span class='line'>    Surface = ReactArt.Surface,
</span><span class='line'>    Group = ReactArt.Group,
</span><span class='line'>    computeLayout = require('css-layout'),
</span><span class='line'>    Circle = require('react-art/shapes/circle'),
</span><span class='line'>    Rectangle = require('react-art/shapes/rectangle');
</span><span class='line'>
</span><span class='line'>var Surface = ReactArt.Surface;
</span><span class='line'>
</span><span class='line'>var viewportWidth = function() {
</span><span class='line'>    return  window.innerWidth - 100;
</span><span class='line'>}
</span><span class='line'>var viewportHeight = function() {
</span><span class='line'>    return window.innerHeight - 100;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>var componentTree = {
</span><span class='line'>    style: {
</span><span class='line'>        padding: 10
</span><span class='line'>    },
</span><span class='line'>    component: Rectangle,
</span><span class='line'>    children: [{
</span><span class='line'>        style: {
</span><span class='line'>            padding: 10,
</span><span class='line'>            flexDirection: 'column',
</span><span class='line'>            alignItems: 'center'
</span><span class='line'>        },
</span><span class='line'>        component: Rectangle,
</span><span class='line'>        children: [
</span><span class='line'>            {
</span><span class='line'>                style: {
</span><span class='line'>                    width: 30,
</span><span class='line'>                    height: 30
</span><span class='line'>                },
</span><span class='line'>                component: Rectangle
</span><span class='line'>            },
</span><span class='line'>            {
</span><span class='line'>                style: {
</span><span class='line'>                    margin: 10,
</span><span class='line'>                    width: 50,
</span><span class='line'>                    height: 50,
</span><span class='line'>                    alignItems: 'center',
</span><span class='line'>                    justifyContent: 'center'
</span><span class='line'>                },
</span><span class='line'>                component: Circle,
</span><span class='line'>                children: [
</span><span class='line'>                    {
</span><span class='line'>                        style: {
</span><span class='line'>                            width: 10,
</span><span class='line'>                            height: 10
</span><span class='line'>                        },
</span><span class='line'>                        component: Circle
</span><span class='line'>                    }
</span><span class='line'>                ]
</span><span class='line'>            }
</span><span class='line'>        ]
</span><span class='line'>    }]
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>var layout = computeLayout(componentTree);
</span><span class='line'>
</span><span class='line'>function traverseLayout(componentTree, layout) {
</span><span class='line'>    var Component = componentTree.component;
</span><span class='line'>    return (
</span><span class='line'>        &lt;Group x={layout.left} y={layout.top}&gt;
</span><span class='line'>            &lt;Component
</span><span class='line'>                {...getProps(Component, layout)}
</span><span class='line'>             /&gt;
</span><span class='line'>             &lt;Group x={0} y={0}&gt;
</span><span class='line'>                {
</span><span class='line'>                    !componentTree.children ? null : componentTree.children.map(function(child, index) {
</span><span class='line'>                        return traverseLayout(child, layout.children[index]);
</span><span class='line'>                    })
</span><span class='line'>
</span><span class='line'>                }
</span><span class='line'>             &lt;/Group&gt;
</span><span class='line'>        &lt;/Group&gt;
</span><span class='line'>    )
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>function getProps(component, layout) {
</span><span class='line'>
</span><span class='line'>    var props = {
</span><span class='line'>        x: 0,
</span><span class='line'>        y: 0
</span><span class='line'>    };
</span><span class='line'>
</span><span class='line'>    if (Rectangle === component) {
</span><span class='line'>        props.width = layout.width;
</span><span class='line'>        props.height = layout.height;
</span><span class='line'>
</span><span class='line'>    } else if (Circle === component) {
</span><span class='line'>        props.radius = layout.width/2;
</span><span class='line'>        props.x += (layout.width/2)
</span><span class='line'>        props.y += (layout.height/2);
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    props.stroke = "#000";
</span><span class='line'>    props.strokeWidth = 1;
</span><span class='line'>    return props;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>var Demo = React.createClass({
</span><span class='line'>  getInitialState: function() {
</span><span class='line'>    return {
</span><span class='line'>
</span><span class='line'>    }
</span><span class='line'>  },
</span><span class='line'>  getRenderLayout: function() {
</span><span class='line'>    return traverseLayout(componentTree, layout);
</span><span class='line'>  },
</span><span class='line'>  render: function () {
</span><span class='line'>    return (
</span><span class='line'>      &lt;div&gt;
</span><span class='line'>        &lt;Surface
</span><span class='line'>            width={viewportWidth()}
</span><span class='line'>            height={viewportHeight()}
</span><span class='line'>        &gt;
</span><span class='line'>            {this.getRenderLayout()}
</span><span class='line'>        &lt;/Surface&gt;
</span><span class='line'>      &lt;/div&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = Demo;</span></code></pre></td></tr></table></div></figure>


<h3>Possibilities</h3>

<p>Tic-tac-toe? Heh.</p>

<p>This could be made to layout components arbitrarily much like we do with <code>react-native</code>. It&rsquo;s not perfect and could only be used in specific scenarios but it&rsquo;s still a fun prototype.</p>

<h3>Demo</h3>

<p data-height="624" data-theme-id="0" data-slug-hash="zGZOMN" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/zGZOMN/'>zGZOMN</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>




	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/css-layout/'>css-layout</a>, <a class='category' href='/blog/categories/layout/'>layout</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-art/'>react-art</a>, <a class='category' href='/blog/categories/react-native/'>react-native</a>, <a class='category' href='/blog/categories/visualization/'>visualization</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/30/create-a-map-with-react-art/">Create a map with React-Art</a></h1>
		<time>30 May 2015</time>
	</header>
	<div class="content">
		<h3>Intro</h3>

<p>Just Like the title states, we&rsquo;re going to make a map with <code>react-art</code>. When you think of maps many people jump straight to <code>leaflet</code>, <code>google maps</code>, or <code>mapbox</code>. Well one of the key things they are doing is just plotting map tiles.</p>

<p>Map tiles are just images that can be stitched together and form a map. That is why whenever you drag on a map portions of it pop in in squares.</p>

<p>Don&rsquo;t worry, I won&rsquo;t get deep into mapping terminology because I don&rsquo;t know it. If you want to learn checkout this post <a href="http://www.macwright.org/2012/05/15/how-web-maps-work.html">http://www.macwright.org/2012/05/15/how-web-maps-work.html</a></p>

<p>All you&rsquo;ll need to know is <code>Latitude</code>, <code>Longitude</code>, and <code>Tile</code> aka (an image of a piece of a map).</p>

<p>Our tilemap source will be the fabulous <a href="https://www.openstreetmap.org/">OpenStreetMap</a>. It&rsquo;s a community driven mapping solution. Check it out and contribute if you can!</p>

<p>This was going to be a blog post about creating a map but I ended up turning it into a library.</p>

<h3>What I Built</h3>

<p>I ended up writing up a library to show it off.</p>

<p>Checkout <a href="https://github.com/browniefed/react-art-map">https://github.com/browniefed/react-art-map</a> for the library and examples.</p>

<p>We use <a href="https://github.com/zacbarton/node-googlemaps-utils">https://github.com/zacbarton/node-googlemaps-utils</a> and
<a href="https://github.com/gagan-bansal/map-the-tiles">https://github.com/gagan-bansal/map-the-tiles</a>.</p>

<p>These 2 libraries are helper libraries.</p>

<p><code>googlemaps-utils</code> takes a <code>width/height</code> and a central <code>lat/long</code> and gives us a bounding box which is just the <code>top/left</code> coordinate and the <code>bottom/right</code> coordinate.</p>

<p>We then take that bounding box and convert it to meter points so we can generate a <a href="http://en.wikipedia.org/wiki/Mercator_projection">mercator projection</a>.</p>

<p>The <code>map-the-tiles</code> takes those meter points and returns <code>x,y,z</code> points;</p>

<p>Those <code>x,y,z</code> points get fed into the OSM url <code>http://{s}.tile.osm.org/{z}/{x}/{y}.png</code> and we get our tile images.</p>

<p>We can then render them at their given <code>top/left</code> points w/ <code>react-art</code>.</p>

<p>Ultimately this library was built with A LOT of googling and assembling some tools people already constructed.</p>

<h3>Some Internals</h3>

<p>Most of the logic is just in the <code>TileUtil</code>. There are likely much more efficient ways to do this however this is my first stab at it with my limited geo knowledge.</p>

<p>Converts <code>lat/long</code> to meter points</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>degrees2meters(lon,lat) {
</span><span class='line'>    var x = lon * 20037508.34 / 180;
</span><span class='line'>    var y = Math.log(Math.tan((90 + lat) * Math.PI / 360)) / (Math.PI / 180);
</span><span class='line'>    y = y * 20037508.34 / 180;
</span><span class='line'>    return [x, y]
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Converts meters to coordinates</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>meters2degress(x,y) {
</span><span class='line'>    var lon = x *  180 / 20037508.34 ;
</span><span class='line'>    var lat = Number(180 / Math.PI * (2 * Math.atan(Math.exp(y * Math.PI / 180)) - Math.PI / 2));
</span><span class='line'>    return [lon, lat]
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>The main layout generator.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getTileLayout(options) {
</span><span class='line'>    var layout = [];
</span><span class='line'>    var bounds = gmu.calcBounds(options.center[1], options.center[0], options.zoom, options.width, options.height); // GET COORDINATE BOUNDS
</span><span class='line'>
</span><span class='line'>    var topLeftMeters = TileUtil.degrees2meters(bounds.left, bounds.top),
</span><span class='line'>        bottomRightMeters = TileUtil.degrees2meters(bounds.right, bounds.bottom);
</span><span class='line'>
</span><span class='line'>    //Conver the coordinates each to meters
</span><span class='line'>    
</span><span class='line'>    var tiler = new MapTheTiles(null, options.tileWidth); // Create a generic tiler based on our tile width
</span><span class='line'>    
</span><span class='line'>    var layoutForBounds = {
</span><span class='line'>        top: topLeftMeters[1],
</span><span class='line'>        left: topLeftMeters[0],
</span><span class='line'>        right: bottomRightMeters[0],
</span><span class='line'>        bottom: bottomRightMeters[1]
</span><span class='line'>    };
</span><span class='line'>    //Pass in the meters for each point
</span><span class='line'>
</span><span class='line'>    var tiles = tiler.getTiles(layoutForBounds, options.zoom) // Get the x,y,z points for our zoom level
</span><span class='line'>
</span><span class='line'>    tiles.forEach(function(tile) {
</span><span class='line'>        var coordPoint = {
</span><span class='line'>            x: tile.X,
</span><span class='line'>            y: tile.Y,
</span><span class='line'>            z: tile.Z
</span><span class='line'>        },
</span><span class='line'>        coord = {
</span><span class='line'>            x: tile.left,
</span><span class='line'>            y: tile.top,
</span><span class='line'>            img: TileUtil.getTileUrl(options.tileSource, coordPoint, options.subdomains) //Just format the OSM tile resource
</span><span class='line'>        };
</span><span class='line'>
</span><span class='line'>        layout.push(coord);
</span><span class='line'>    }, this);
</span><span class='line'>
</span><span class='line'>    return layout;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>This is how we render each tile.
We have the <code>x/y</code> coordinates thanks to our tiler.</p>

<p>We use <code>Paths.js</code> to create a generic rectangular path.
This is so we can support <code>react-native</code> in the future since the shapes have yet to be created.</p>

<p>Then we create a new fill with the tile image and set it to the width/height of the generic tile at <code>0,0</code> of the shape.</p>

<p>This technically is a pattern for the background but because we set it to the exact <code>width/height</code> of the image it just renders the image once.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var rectanglePath = Rectangle({
</span><span class='line'>  top: 0,
</span><span class='line'>  left: 0,
</span><span class='line'>  right: 256,
</span><span class='line'>  bottom: 256
</span><span class='line'>}).path.print();
</span><span class='line'>///UP ABOVE
</span><span class='line'>
</span><span class='line'>        return layout.map(function(tile) {
</span><span class='line'>            return (
</span><span class='line'>                &lt;Shape
</span><span class='line'>                    d={rectanglePath}
</span><span class='line'>                    x={tile.x}
</span><span class='line'>                    y={tile.y}
</span><span class='line'>                    fill={new Pattern(tile.img, this.props.tileWidth , this.props.tileWidth, 0, 0)}
</span><span class='line'>                /&gt;
</span><span class='line'>            )
</span><span class='line'>        }, this);</span></code></pre></td></tr></table></div></figure>


<h3>The Code</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react');
</span><span class='line'>var ReactMap = require('react-art-map');
</span><span class='line'>var ReactArt = require('react-art'),
</span><span class='line'>    Circle = require('react-art/shapes/circle');
</span><span class='line'>
</span><span class='line'>var Map = ReactMap.Map;
</span><span class='line'>
</span><span class='line'>var viewportWidth = function() {
</span><span class='line'>    return  window.innerWidth - 100;
</span><span class='line'>}
</span><span class='line'>var viewportHeight = function() {
</span><span class='line'>    return window.innerHeight - 100;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>var center = [
</span><span class='line'>    -122.668197,45.525292
</span><span class='line'>],
</span><span class='line'>offset = 3;
</span><span class='line'>
</span><span class='line'>var Demo = React.createClass({
</span><span class='line'>  getInitialState: function() {
</span><span class='line'>    return {
</span><span class='line'>      center: center,
</span><span class='line'>      zoom: 15,
</span><span class='line'>      x: 100
</span><span class='line'>    }
</span><span class='line'>  },
</span><span class='line'>  componentDidMount: function() {
</span><span class='line'>    requestAnimationFrame(this.updateCircle);
</span><span class='line'>  },
</span><span class='line'>  updateCircle: function() {
</span><span class='line'>    if (this.state.x &gt;= viewportWidth()) {
</span><span class='line'>        offset = -3;
</span><span class='line'>    } else if ( this.state.x &lt;= 99) {
</span><span class='line'>        offset = 3;
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    this.state.x += offset;
</span><span class='line'>    this.setState(this.state, function() {
</span><span class='line'>        requestAnimationFrame(this.updateCircle);
</span><span class='line'>    });
</span><span class='line'>  },
</span><span class='line'>  handleDrag: function(newCenter) {
</span><span class='line'>    this.setState({
</span><span class='line'>      center: newCenter
</span><span class='line'>    });
</span><span class='line'>  }, 
</span><span class='line'>  render: function () {
</span><span class='line'>    return (
</span><span class='line'>      &lt;div&gt;
</span><span class='line'>        &lt;Map
</span><span class='line'>            width={viewportWidth()}
</span><span class='line'>            height={viewportHeight()}
</span><span class='line'>            center={this.state.center}
</span><span class='line'>            zoom={this.state.zoom}
</span><span class='line'>            tileSource="http://{s}.tile.osm.org/{z}/{x}/{y}.png"
</span><span class='line'>            onDrag={this.handleDrag}
</span><span class='line'>        &gt;
</span><span class='line'>            &lt;Circle 
</span><span class='line'>                x={this.state.x}
</span><span class='line'>                y={100}
</span><span class='line'>                radius={30}
</span><span class='line'>                stroke="#000"
</span><span class='line'>                strokeWidth={5}
</span><span class='line'>            /&gt;
</span><span class='line'>        &lt;/Map&gt;
</span><span class='line'>      &lt;/div&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = Demo;</span></code></pre></td></tr></table></div></figure>


<h3>React Native?!?!?!</h3>

<p>React Native has a map implementation but it doesn&rsquo;t allow for much flexibility. You can render pins but that is about it.</p>

<p>With this library once the Pattern fill gets implemented you can render any map tile based service + any cool visualiztions on the map that you want.</p>

<p>I&rsquo;ve logged an issue here <a href="https://github.com/facebook/react-native/issues/1462">https://github.com/facebook/react-native/issues/1462</a> so follow along for when it gets implemented.</p>

<h3>Results</h3>

<p data-height="624" data-theme-id="0" data-slug-hash="PqWRvz" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/PqWRvz/'>PqWRvz</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>




	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/mapping/'>mapping</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-art/'>react-art</a>, <a class='category' href='/blog/categories/react-native/'>react-native</a>, <a class='category' href='/blog/categories/tiles/'>tiles</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/29/react-art-and-bar-charts/">React-Art and Bar Charts</a></h1>
		<time>29 May 2015</time>
	</header>
	<div class="content">
		<h3>Introduction</h3>

<p>I&rsquo;ve shown in the past how to utilize <code>react-art</code> and other libraries to do animations, and render arbitrary things. So now lets bring it all together, lets render a simple bar chart.</p>

<p>I&rsquo;m going to leverage <a href="https://github.com/andreaferretti/paths-js">Paths.js</a> because it was made for this exact reason. Given data, generate an immutable set of paths. Ultimately that is what visualizations are, a data set converted to a set of paths.</p>

<p>The end result will look something
<img src="http://i.imgur.com/DpChFtO.png" title="Bar Chart Result w/ Hover" ></p>

<h3>Boilerplate</h3>

<p>I like to setup a boilerplate templat that just renders an arbitrary surface that is the full width of the viewport. Also to make things response we&rsquo;ll hook up some event listeners to the window resize and trigger a re-render.</p>

<p>We will bring in each side <code>100px</code> and add a <code>margin</code> of <code>50px</code> to each side to give us some padding on each side. Also note we should totally debounce the resize event on the window if this was production!</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react'),
</span><span class='line'>    ReactArt = require('react-art'),
</span><span class='line'>    Surface = ReactArt.Surface;
</span><span class='line'>
</span><span class='line'>var viewportWidth = function() {
</span><span class='line'>    return  window.innerWidth - 100;
</span><span class='line'>}
</span><span class='line'>var viewportHeight = function() {
</span><span class='line'>    return window.innerHeight - 100;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>var Demo = React.createClass({
</span><span class='line'>
</span><span class='line'>    getInitialState: function() {
</span><span class='line'>        return {
</span><span class='line'>            width: viewportWidth(),
</span><span class='line'>            height: viewportHeight()
</span><span class='line'>        }
</span><span class='line'>    },
</span><span class='line'>    componentDidMount: function() {
</span><span class='line'>        window.addEventListener('resize', this.refresh, false); //This should be debounced
</span><span class='line'>    },
</span><span class='line'>    componentWillUnmount: function() {
</span><span class='line'>        window.removeEventListener('resize', this.refresh, false);
</span><span class='line'>    },
</span><span class='line'>    refresh: function() {
</span><span class='line'>        this.setState({
</span><span class='line'>            width: viewportWidth(),
</span><span class='line'>            height: viewportHeight()
</span><span class='line'>        });
</span><span class='line'>    },
</span><span class='line'>
</span><span class='line'>    render: function() {
</span><span class='line'>        var bar = this.getBar();
</span><span class='line'>
</span><span class='line'>        return (
</span><span class='line'>            &lt;div style= style=&gt;
</span><span class='line'>                &lt;Surface
</span><span class='line'>                    width={this.state.width}
</span><span class='line'>                    height={this.state.height}
</span><span class='line'>                &gt;
</span><span class='line'>
</span><span class='line'>                &lt;/Surface&gt;
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        );
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = Demo;</span></code></pre></td></tr></table></div></figure>


<h3>Data and the Chart</h3>

<p>We need some data, so I&rsquo;ll steal some from the <code>Paths.js</code> wiki, and also steal the colors.</p>

<p>We&rsquo;ll add a method that returns a Bar Chart generated by <code>Paths.js</code> that is dervied from width/height we set on state.
A new Bar Chart will get called every time we call <code>setState</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var data = [
</span><span class='line'>    [
</span><span class='line'>      { name: 'Italy', population: 59859996 },
</span><span class='line'>      { name: 'Spain', population: 46704314 },
</span><span class='line'>      { name: 'France', population: 65806000 },
</span><span class='line'>      { name: 'Romania', population: 20121641 },
</span><span class='line'>      { name: 'Greece', population: 10815197 }
</span><span class='line'>    ],
</span><span class='line'>    [
</span><span class='line'>      { name: 'Zambia', population: 14580290 },
</span><span class='line'>      { name: 'Cameroon', population: 20386799 },
</span><span class='line'>      { name: 'Nigeria', population: 173615000 },
</span><span class='line'>      { name: 'Ethiopia', population: 86613986 },
</span><span class='line'>      { name: 'Ghana', population: 24658823 }
</span><span class='line'>    ]
</span><span class='line'>  ];
</span><span class='line'>
</span><span class='line'>var colorPallete = ["#FEE871", "#E5FAAF"];
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>getBar: function() {
</span><span class='line'>
</span><span class='line'>    var bar = Bar({
</span><span class='line'>      data: data,
</span><span class='line'>      accessor: function(x) { return x.population; }, // Value to use
</span><span class='line'>      compute: {
</span><span class='line'>        color: function(i) { return colorPallete[i]; } //Color of the bar
</span><span class='line'>      },
</span><span class='line'>      width: this.state.width, //Set it to our surface width so it is responsive when our surface width changes
</span><span class='line'>      height: this.state.height, //Set it to our surface height so it's repsponsive
</span><span class='line'>      gutter: 10
</span><span class='line'>    });
</span><span class='line'>    
</span><span class='line'>    return bar;
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<h3>Lets create the X/Y axis bars</h3>

<p>The X axis and Y axis can be generated with straight lines by once again <code>Paths.js</code> <code>Path</code> method.</p>

<p>The <code>X</code> axis starts at the bottom left corner, so <code>0,height</code>, and runs to the far right, so <code>width,height</code>.</p>

<p>The <code>Y</code> axis starts at the top right corner, so <code>0,0</code>, and runs along the left side to the bottom so <code>0,height</code></p>

<p>We merely stroke a 1px black line.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getXAxis: function() {
</span><span class='line'>    var path = Path().moveto(0, this.state.height).lineto(this.state.width, this.state.height);
</span><span class='line'>    return (
</span><span class='line'>        &lt;Shape d={path.print()} strokeWidth={1} stroke="#000" /&gt;
</span><span class='line'>    );   
</span><span class='line'>},
</span><span class='line'>getYAxis: function() {
</span><span class='line'>    var path = Path().moveto(0,0).lineto(0, this.state.height);
</span><span class='line'>    return (
</span><span class='line'>        &lt;Shape d={path.print()} strokeWidth={1} stroke="#000" /&gt;
</span><span class='line'>    ); 
</span><span class='line'>},
</span><span class='line'>render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;div style= style=&gt;
</span><span class='line'>                &lt;Surface
</span><span class='line'>                    width={this.state.width}
</span><span class='line'>                    height={this.state.height}
</span><span class='line'>                &gt;
</span><span class='line'>                    &lt;Group&gt;
</span><span class='line'>                        {this.getXAxis()}
</span><span class='line'>                        {this.getYAxis()}
</span><span class='line'>                    &lt;/Group&gt;
</span><span class='line'>                &lt;/Surface&gt;
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        );
</span><span class='line'>    }</span></code></pre></td></tr></table></div></figure>


<h3>Render the Bar Graph</h3>

<p>We&rsquo;ll call <code>this.getBar()</code> to just generate one bar graph and then pipe it into each function that needs it.
To make this more testable we&rsquo;d probably just want to provide each function with absolutely necessary info but just keep that in mind if you implement this for real.</p>

<p>All we do is map over each <code>curve</code> that we have, in our case we have <code>10</code> data points so therefore we have <code>10</code> curves.
The color comes from the way we grouped our data and the pallette we provided in the first step.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getBarChart: function(bar) {
</span><span class='line'>    return bar.curves.map(function(bar) {
</span><span class='line'>        return (
</span><span class='line'>            &lt;Group&gt;
</span><span class='line'>              &lt;Shape d={bar.line.path.print()} fill={bar.color}/&gt;
</span><span class='line'>            &lt;/Group&gt;
</span><span class='line'>        )
</span><span class='line'>    }, this)
</span><span class='line'>},
</span><span class='line'>render: function() {
</span><span class='line'>    var bar = this.getBar();
</span><span class='line'>
</span><span class='line'>    return (
</span><span class='line'>        &lt;div style= style=&gt;
</span><span class='line'>            &lt;Surface
</span><span class='line'>                width={this.state.width}
</span><span class='line'>                height={this.state.height}
</span><span class='line'>            &gt;
</span><span class='line'>                &lt;Group&gt;
</span><span class='line'>                    {this.getBarChart(bar)} 
</span><span class='line'>                &lt;/Group&gt;
</span><span class='line'>                &lt;Group&gt;
</span><span class='line'>                    {this.getXAxis(bar)}
</span><span class='line'>                    {this.getYAxis(bar)}
</span><span class='line'>                &lt;/Group&gt;
</span><span class='line'>            &lt;/Surface&gt;
</span><span class='line'>        &lt;/div&gt;
</span><span class='line'>    );
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h3>Render the Bar Information</h3>

<p>Lets also display some text about the bars. We&rsquo;ll use <code>Text</code> from <code>react-art</code> to do that.
We need to calculate a few points, which <code>Paths.js</code> will help us with.</p>

<p>Since each bar is a rectangle it just has 4 points, we can get the <code>points</code> from the path.
The path will gives us 4 arrays, each with <code>x,y</code> coordinates of each corner point.</p>

<p>We need to do a little subtraction of the <code>x,y</code> coordinates to figure out the width of each bar, and height of each bar so we can place our text.</p>

<p>We&rsquo;ll use the <code>Group</code> element from <code>react-art</code> to adjust our coordinate system to start at the top left of each bar.
The name and population will be aligned to the center, and at the bottom of the bar. We can use <code>x,y</code> coordinates to derive our width/height.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getBarChart: function(bar) {
</span><span class='line'>    return bar.curves.map(function(bar) {
</span><span class='line'>
</span><span class='line'>        var points = bar.line.path.points(),
</span><span class='line'>            right = points[0][0],
</span><span class='line'>            top = points[0][1],
</span><span class='line'>            left = points[2][0],
</span><span class='line'>            bottom = points[2][1],
</span><span class='line'>            width = right - left,
</span><span class='line'>            height = bottom - top;
</span><span class='line'>
</span><span class='line'>        return (
</span><span class='line'>            &lt;Group&gt;
</span><span class='line'>              &lt;Shape d={bar.line.path.print()} fill={bar.color}/&gt;
</span><span class='line'>
</span><span class='line'>              &lt;Group x={left} y={top}&gt;
</span><span class='line'>                &lt;Text x={width/2} y={height - 24} alignment="middle" fill="#000" font='bold 10px "Arial"'&gt;{bar.item.name}&lt;/Text&gt;
</span><span class='line'>                &lt;Text x={width/2} y={height - 12} alignment="middle" fill="#000" font='bold 10px "Arial"'&gt;{bar.item.population +''}&lt;/Text&gt;
</span><span class='line'>              &lt;/Group&gt;
</span><span class='line'>            &lt;/Group&gt;
</span><span class='line'>        )
</span><span class='line'>    }, this)
</span><span class='line'>},</span></code></pre></td></tr></table></div></figure>


<h3>Hover data for fun</h3>

<p>Just to show how to handle mouse events we can have a <code>mouseMove</code> on each bar.
We&rsquo;ll bind each hover event with the <code>item</code> object which has the name and population.</p>

<p>When a new bar is hovered or the mouse is moved it will set the <code>hoveredItem</code> object and coordinates on our state which will cause a re-render.
Each movement of the mouse will cause a re-render so be sure and debounce this as well.</p>

<p>The hovered data displayed will actually use HTML not <code>react-art</code> since we wrap the <code>Surface</code> in a <code>div</code> and give it <code>position:relative</code>. This will mean it has the same coordinates as our <code>Surface</code> mouse events which is why we can just use <code>x,y</code> on the event.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>handleMouseMove: function(item, e) {
</span><span class='line'>    this.setState({
</span><span class='line'>        hoveredItem: item,
</span><span class='line'>        hoveredY: e.y,
</span><span class='line'>        hoveredX: e.x
</span><span class='line'>    });
</span><span class='line'>},
</span><span class='line'>getBarChart: function(bar) {
</span><span class='line'>    return bar.curves.map(function(bar) {
</span><span class='line'>
</span><span class='line'>        var points = bar.line.path.points(),
</span><span class='line'>            right = points[0][0],
</span><span class='line'>            top = points[0][1],
</span><span class='line'>            left = points[2][0],
</span><span class='line'>            bottom = points[2][1],
</span><span class='line'>            width = right - left,
</span><span class='line'>            height = bottom - top;
</span><span class='line'>            
</span><span class='line'>        return (
</span><span class='line'>            &lt;Group 
</span><span class='line'>              onMouseMove={this.handleMouseMove.bind(this, bar.item)}
</span><span class='line'>            &gt;
</span><span class='line'>              &lt;Shape d={bar.line.path.print()} fill={bar.color}/&gt;
</span><span class='line'>
</span><span class='line'>              &lt;Group x={left} y={top}&gt;
</span><span class='line'>                &lt;Text x={width/2} y={height - 24} alignment="middle" fill="#000" font='bold 10px "Arial"'&gt;{bar.item.name}&lt;/Text&gt;
</span><span class='line'>                &lt;Text x={width/2} y={height - 12} alignment="middle" fill="#000" font='bold 10px "Arial"'&gt;{bar.item.population +''}&lt;/Text&gt;
</span><span class='line'>              &lt;/Group&gt;
</span><span class='line'>            &lt;/Group&gt;
</span><span class='line'>        )
</span><span class='line'>    }, this)
</span><span class='line'>},
</span><span class='line'>getHoveredData: function() {
</span><span class='line'>    if (!this.state.hoveredItem) {
</span><span class='line'>        return null;
</span><span class='line'>    }
</span><span class='line'>    return (
</span><span class='line'>            &lt;div style=&gt;
</span><span class='line'>                &lt;h2&gt;{this.state.hoveredItem.name}&lt;/h2&gt;
</span><span class='line'>                &lt;h5&gt;{this.state.hoveredItem.population}&lt;/h5&gt;
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        )
</span><span class='line'>},
</span><span class='line'>render: function() {
</span><span class='line'>    var bar = this.getBar();
</span><span class='line'>
</span><span class='line'>    return (
</span><span class='line'>        &lt;div style= style=&gt;
</span><span class='line'>            &lt;Surface
</span><span class='line'>                width={this.state.width}
</span><span class='line'>                height={this.state.height}
</span><span class='line'>            &gt;
</span><span class='line'>                &lt;Group&gt;
</span><span class='line'>                    {this.getBarChart(bar)} 
</span><span class='line'>                &lt;/Group&gt;
</span><span class='line'>                &lt;Group&gt;
</span><span class='line'>                    {this.getXAxis(bar)}
</span><span class='line'>                    {this.getYAxis(bar)}
</span><span class='line'>                &lt;/Group&gt;
</span><span class='line'>            &lt;/Surface&gt;
</span><span class='line'>            {this.getHoveredData()}
</span><span class='line'>
</span><span class='line'>        &lt;/div&gt;
</span><span class='line'>    );
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h3>Final Code</h3>

<p>Finally all the code combined.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react'),
</span><span class='line'>    ReactArt = require('react-art'),
</span><span class='line'>    Surface = ReactArt.Surface,
</span><span class='line'>    Group = ReactArt.Group,
</span><span class='line'>    Text = ReactArt.Text,
</span><span class='line'>    Shape = ReactArt.Shape,
</span><span class='line'>    Bar = require('paths-js/bar'),
</span><span class='line'>    Path = require('paths-js/path');
</span><span class='line'>
</span><span class='line'>var viewportWidth = function() {
</span><span class='line'>    return  window.innerWidth - 100;
</span><span class='line'>}
</span><span class='line'>var viewportHeight = function() {
</span><span class='line'>    return window.innerHeight - 100;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>var data = [
</span><span class='line'>    [
</span><span class='line'>      { name: 'Italy', population: 59859996 },
</span><span class='line'>      { name: 'Spain', population: 46704314 },
</span><span class='line'>      { name: 'France', population: 65806000 },
</span><span class='line'>      { name: 'Romania', population: 20121641 },
</span><span class='line'>      { name: 'Greece', population: 10815197 }
</span><span class='line'>    ],
</span><span class='line'>    [
</span><span class='line'>      { name: 'Zambia', population: 14580290 },
</span><span class='line'>      { name: 'Cameroon', population: 20386799 },
</span><span class='line'>      { name: 'Nigeria', population: 173615000 },
</span><span class='line'>      { name: 'Ethiopia', population: 86613986 },
</span><span class='line'>      { name: 'Ghana', population: 24658823 }
</span><span class='line'>    ]
</span><span class='line'>  ];
</span><span class='line'>
</span><span class='line'>var colorPallete = ["#FEE871", "#E5FAAF", "#B7E5F5"];
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>var Demo = React.createClass({
</span><span class='line'>
</span><span class='line'>    getInitialState: function() {
</span><span class='line'>        return {
</span><span class='line'>            width: viewportWidth(),
</span><span class='line'>            height: viewportHeight()
</span><span class='line'>        }
</span><span class='line'>    },
</span><span class='line'>    componentDidMount: function() {
</span><span class='line'>        window.addEventListener('resize', this.refresh, false); //This should be debounced
</span><span class='line'>    },
</span><span class='line'>    componentWillUnmount: function() {
</span><span class='line'>        window.removeEventListener('resize', this.refresh, false);
</span><span class='line'>    },
</span><span class='line'>    refresh: function() {
</span><span class='line'>        this.setState({
</span><span class='line'>            width: viewportWidth(),
</span><span class='line'>            height: viewportHeight()
</span><span class='line'>        });
</span><span class='line'>    },
</span><span class='line'>    getBar: function() {
</span><span class='line'>
</span><span class='line'>        var bar = Bar({
</span><span class='line'>          data: data,
</span><span class='line'>          accessor: function(x) { return x.population; }, // Value to use
</span><span class='line'>          compute: {
</span><span class='line'>            color: function(i) { return colorPallete[i]; } //Color of the bar
</span><span class='line'>          },
</span><span class='line'>          width: this.state.width, //Set it to our surface width so it is responsive when our surface width changes
</span><span class='line'>          height: this.state.height, //Set it to our surface height so it's repsponsive
</span><span class='line'>          gutter: 10
</span><span class='line'>        });
</span><span class='line'>        
</span><span class='line'>        return bar;
</span><span class='line'>    },
</span><span class='line'>    handleMouseMove: function(item, e) {
</span><span class='line'>        this.setState({
</span><span class='line'>            hoveredItem: item,
</span><span class='line'>            hoveredY: e.y,
</span><span class='line'>            hoveredX: e.x
</span><span class='line'>        });
</span><span class='line'>    },
</span><span class='line'>    getBarChart: function(bar) {
</span><span class='line'>        return bar.curves.map(function(bar) {
</span><span class='line'>
</span><span class='line'>            var points = bar.line.path.points(),
</span><span class='line'>                right = points[0][0],
</span><span class='line'>                top = points[0][1],
</span><span class='line'>                left = points[2][0],
</span><span class='line'>                bottom = points[2][1],
</span><span class='line'>                width = right - left,
</span><span class='line'>                height = bottom - top;
</span><span class='line'>                
</span><span class='line'>            return (
</span><span class='line'>                &lt;Group 
</span><span class='line'>                  onMouseMove={this.handleMouseMove.bind(this, bar.item)}
</span><span class='line'>                &gt;
</span><span class='line'>                  &lt;Shape d={bar.line.path.print()} fill={bar.color}/&gt;
</span><span class='line'>
</span><span class='line'>                  &lt;Group x={left} y={top}&gt;
</span><span class='line'>                    &lt;Text x={width/2} y={height - 24} alignment="middle" fill="#000" font='bold 10px "Arial"'&gt;{bar.item.name}&lt;/Text&gt;
</span><span class='line'>                    &lt;Text x={width/2} y={height - 12} alignment="middle" fill="#000" font='bold 10px "Arial"'&gt;{bar.item.population +''}&lt;/Text&gt;
</span><span class='line'>                  &lt;/Group&gt;
</span><span class='line'>                &lt;/Group&gt;
</span><span class='line'>            )
</span><span class='line'>        }, this)
</span><span class='line'>    },
</span><span class='line'>    getXAxis: function(bar) {
</span><span class='line'>        var path = Path().moveto(0, this.state.height).lineto(this.state.width, this.state.height);
</span><span class='line'>        return (
</span><span class='line'>            &lt;Shape d={path.print()} strokeWidth={1} stroke="#000" /&gt;
</span><span class='line'>        );   
</span><span class='line'>    },
</span><span class='line'>    getYAxis: function(bar) {
</span><span class='line'>        var path = Path().moveto(0,0).lineto(0, this.state.height);
</span><span class='line'>        return (
</span><span class='line'>            &lt;Shape d={path.print()} strokeWidth={1} stroke="#000" /&gt;
</span><span class='line'>        ); 
</span><span class='line'>    },
</span><span class='line'>    getHoveredData: function() {
</span><span class='line'>        if (!this.state.hoveredItem) {
</span><span class='line'>            return null;
</span><span class='line'>        }
</span><span class='line'>        return (
</span><span class='line'>                &lt;div style=&gt;
</span><span class='line'>                    &lt;h2&gt;{this.state.hoveredItem.name}&lt;/h2&gt;
</span><span class='line'>                    &lt;h5&gt;{this.state.hoveredItem.population}&lt;/h5&gt;
</span><span class='line'>                &lt;/div&gt;
</span><span class='line'>            )
</span><span class='line'>    },
</span><span class='line'>    render: function() {
</span><span class='line'>        var bar = this.getBar();
</span><span class='line'>
</span><span class='line'>        return (
</span><span class='line'>            &lt;div style= style=&gt;
</span><span class='line'>                &lt;Surface
</span><span class='line'>                    width={this.state.width}
</span><span class='line'>                    height={this.state.height}
</span><span class='line'>                &gt;
</span><span class='line'>                    &lt;Group&gt;
</span><span class='line'>                        {this.getBarChart(bar)} 
</span><span class='line'>                    &lt;/Group&gt;
</span><span class='line'>                    &lt;Group&gt;
</span><span class='line'>                        {this.getXAxis(bar)}
</span><span class='line'>                        {this.getYAxis(bar)}
</span><span class='line'>                    &lt;/Group&gt;
</span><span class='line'>                &lt;/Surface&gt;
</span><span class='line'>                {this.getHoveredData()}
</span><span class='line'>
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        );
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = Demo;</span></code></pre></td></tr></table></div></figure>


<h3>Results</h3>

<p data-height="624" data-theme-id="0" data-slug-hash="LVxjPw" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/LVxjPw/'>LVxjPw</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>


<h3>Conclusion</h3>

<p>Once again <a href="https://github.com/andreaferretti/paths-js">Paths.js</a> comes in handy for generating arbitrary path information, and providing access to a lot of valuable data to making laying out your graphs with <code>react-art</code> a breeze.</p>

<p>Some homework for you is to add some vertical labels at each particular step.</p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/bar/'>bar</a>, <a class='category' href='/blog/categories/chart/'>chart</a>, <a class='category' href='/blog/categories/graphs/'>graphs</a>, <a class='category' href='/blog/categories/pathsjs/'>pathsjs</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-art/'>react-art</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/27/react-art-and-paths-dot-js/">React Art and Paths.js</a></h1>
		<time>27 May 2015</time>
	</header>
	<div class="content">
		<h3>Intro</h3>

<p><a href="https://github.com/andreaferretti/paths-js">Paths.js</a> is a cool library. It comes with 3 levels of generating paths.</p>

<ul>
<li>Low level which helps you generate paths/lines.</li>
<li>Mid level which generates paths for shapes</li>
<li>High level which takes a set of data and generates graphs</li>
</ul>


<p>All of these are great when working with <code>react-art</code> because it&rsquo;s just returning data. I&rsquo;ll say it once, and a million more but libraries that just generate data make it easy to traverse and render with <code>react-art</code>.</p>

<h3>Paths</h3>

<p>Example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var path = Path()
</span><span class='line'>  .moveto(10, 20)
</span><span class='line'>  .lineto(30, 50)
</span><span class='line'>  .lineto(25, 28)
</span><span class='line'>  .qcurveto(27, 30, 32, 27)
</span><span class='line'>  .closepath();</span></code></pre></td></tr></table></div></figure>


<p>This is can just be plugged right into <code>react-art</code> <code>Shape</code> element.</p>

<p>Like so</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react'),
</span><span class='line'>  ReactArt = require('react-art'),
</span><span class='line'>  Surface = ReactArt.Surface,
</span><span class='line'>  Shape = ReactArt.Shape,
</span><span class='line'>  Path = require('paths-js/path');
</span><span class='line'>
</span><span class='line'>var Demo = React.createClass({
</span><span class='line'>  getInitialState: function() {
</span><span class='line'>      return {
</span><span class='line'>          to: {
</span><span class='line'>              x: 30,
</span><span class='line'>              y: 50
</span><span class='line'>          }
</span><span class='line'>      }
</span><span class='line'>  },
</span><span class='line'>  getPath: function() {
</span><span class='line'>      var path = Path()
</span><span class='line'>                    .moveto(10, 20)
</span><span class='line'>                    .lineto(this.state.to.x, this.state.to.y)
</span><span class='line'>                    .lineto(25, 28)
</span><span class='line'>                    .qcurveto(27, 30, 32, 27)
</span><span class='line'>                    .closepath();
</span><span class='line'>
</span><span class='line'>      return path.print();
</span><span class='line'>  },
</span><span class='line'>  startAnimating: function() {
</span><span class='line'>
</span><span class='line'>      if (this.state.to.x === 100) {
</span><span class='line'>          this.addToPosition = -1;
</span><span class='line'>      } else if (this.state.to.x === 29) {
</span><span class='line'>          this.addToPosition = 1;
</span><span class='line'>      }
</span><span class='line'>
</span><span class='line'>      this.state.to.x += this.addToPosition;
</span><span class='line'>      this.state.to.y += this.addToPosition;
</span><span class='line'>
</span><span class='line'>      this.setState(this.state);
</span><span class='line'>  },
</span><span class='line'>  componentDidMount: function() {
</span><span class='line'>      this.addToPosition = 1;
</span><span class='line'>      setInterval(this.startAnimating, 17)
</span><span class='line'>  },
</span><span class='line'>  render: function() {
</span><span class='line'>      return (
</span><span class='line'>          &lt;div&gt;
</span><span class='line'>              &lt;Surface
</span><span class='line'>                  width={500}
</span><span class='line'>                  height={500}
</span><span class='line'>              &gt;
</span><span class='line'>                  &lt;Shape d={this.getPath()} stroke="#000" strokeWidth={1} /&gt;
</span><span class='line'>              &lt;/Surface&gt;
</span><span class='line'>          &lt;/div&gt;
</span><span class='line'>      )
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = Demo;</span></code></pre></td></tr></table></div></figure>




<p data-height="624" data-theme-id="0" data-slug-hash="VLmOOE" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/VLmOOE/'>VLmOOE</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>


<h3>Simple Shapes</h3>

<p>Now <code>react-art</code> already comes with a few different shapes but <code>paths.js</code> have a few built in as well, like <code>Rectangle</code> and <code>Bezier</code> curve.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var rectangle = Rectangle({
</span><span class='line'>  top: 10,
</span><span class='line'>  bottom: 3,
</span><span class='line'>  left: -2,
</span><span class='line'>  right: 5
</span><span class='line'>});</span></code></pre></td></tr></table></div></figure>


<p>And how that looks is very similar to the previous example</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react'),
</span><span class='line'>  ReactArt = require('react-art'),
</span><span class='line'>  Surface = ReactArt.Surface,
</span><span class='line'>  Group = ReactArt.Group,
</span><span class='line'>  Shape = ReactArt.Shape,
</span><span class='line'>  Rectangle = require('paths-js/rectangle'),
</span><span class='line'>  Bezier = require('paths-js/bezier');
</span><span class='line'>
</span><span class='line'>var Demo = React.createClass({
</span><span class='line'>  getPath: function() {
</span><span class='line'>      var rectangle = Rectangle({
</span><span class='line'>                    top: 10,
</span><span class='line'>                    bottom: 3,
</span><span class='line'>                    left: -2,
</span><span class='line'>                    right: 5
</span><span class='line'>                  });
</span><span class='line'>
</span><span class='line'>      return rectangle.path.print();
</span><span class='line'>  },
</span><span class='line'>  getBez: function() {
</span><span class='line'>      var points = [[1, 50], [50, 100], [100, 3], [4, 0]];
</span><span class='line'>      var curve = Bezier({
</span><span class='line'>        points: points,
</span><span class='line'>        tension: 0.2
</span><span class='line'>      });
</span><span class='line'>
</span><span class='line'>      return curve.path.print();
</span><span class='line'>  },
</span><span class='line'>  render: function() {
</span><span class='line'>      return (
</span><span class='line'>          &lt;div&gt;
</span><span class='line'>              &lt;Surface
</span><span class='line'>                  width={500}
</span><span class='line'>                  height={500}
</span><span class='line'>              &gt;
</span><span class='line'>                  &lt;Group x={100} y={100}&gt;
</span><span class='line'>                      &lt;Shape d={this.getPath()} stroke="#000" strokeWidth={1} /&gt;
</span><span class='line'>                  &lt;/Group&gt;
</span><span class='line'>                  &lt;Group x={200} y={200}&gt;
</span><span class='line'>                      &lt;Shape d={this.getBez()} stroke="#000" strokeWidth={1} /&gt;
</span><span class='line'>                  &lt;/Group&gt;
</span><span class='line'>              &lt;/Surface&gt;
</span><span class='line'>          &lt;/div&gt;
</span><span class='line'>      )
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = Demo;</span></code></pre></td></tr></table></div></figure>




<p data-height="624" data-theme-id="0" data-slug-hash="xGRNvW" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/xGRNvW/'>xGRNvW</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>


<h3>Graphs</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var pie = Pie({
</span><span class='line'>  data: [
</span><span class='line'>    { name: 'Italy', population: 59859996 },
</span><span class='line'>    { name: 'Mexico', population: 118395054 },
</span><span class='line'>    { name: 'France', population: 65806000 },
</span><span class='line'>    { name: 'Argentina', population: 40117096 },
</span><span class='line'>    { name: 'Japan', population: 127290000 }
</span><span class='line'>  ],
</span><span class='line'>  accessor: function(x) { return x.population; },
</span><span class='line'>  compute: {
</span><span class='line'>    color: function(i) { return somePalette[i]; }
</span><span class='line'>  },
</span><span class='line'>  center: [20, 15],
</span><span class='line'>  r: 30,
</span><span class='line'>  R: 50
</span><span class='line'>});</span></code></pre></td></tr></table></div></figure>


<p>Some code of it in action</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react'),
</span><span class='line'>  ReactArt = require('react-art'),
</span><span class='line'>  Surface = ReactArt.Surface,
</span><span class='line'>  Group = ReactArt.Group,
</span><span class='line'>  Shape = ReactArt.Shape,
</span><span class='line'>  Pie = require('paths-js/Pie');
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>var pie = Pie({
</span><span class='line'>  data: [
</span><span class='line'>    { name: 'Italy', population: 59859996 },
</span><span class='line'>    { name: 'Mexico', population: 118395054 },
</span><span class='line'>    { name: 'France', population: 65806000 },
</span><span class='line'>    { name: 'Argentina', population: 40117096 },
</span><span class='line'>    { name: 'Japan', population: 127290000 }
</span><span class='line'>  ],
</span><span class='line'>  accessor: function(x) { return x.population; },
</span><span class='line'>  compute: {
</span><span class='line'>    color: function(i) { return '#000'; }
</span><span class='line'>  },
</span><span class='line'>  center: [20, 15],
</span><span class='line'>  r: 30,
</span><span class='line'>  R: 50
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>var Demo = React.createClass({
</span><span class='line'>
</span><span class='line'>  getPie: function() {
</span><span class='line'>      return pie.curves.map(function(shape) {
</span><span class='line'>          return (
</span><span class='line'>              &lt;Group&gt;
</span><span class='line'>                  &lt;Text fill="#A6BD8A" font='bold 12px "Arial"' x={shape.sector.centroid[0] - 12} y={shape.sector.centroid[1]}&gt;{shape.item.name}&lt;/Text&gt;
</span><span class='line'>                  &lt;Shape d={shape.sector.path.print()} stroke={shape.color} strokeWidth={1} /&gt;
</span><span class='line'>              &lt;/Group&gt;
</span><span class='line'>          )
</span><span class='line'>      })
</span><span class='line'>  },
</span><span class='line'>  render: function() {
</span><span class='line'>      return (
</span><span class='line'>          &lt;div&gt;
</span><span class='line'>              &lt;Surface
</span><span class='line'>                  width={500}
</span><span class='line'>                  height={500}
</span><span class='line'>              &gt;
</span><span class='line'>                  &lt;Group x={50} y={45}&gt;
</span><span class='line'>                      {this.getPie()}
</span><span class='line'>                  &lt;/Group&gt;
</span><span class='line'>              &lt;/Surface&gt;
</span><span class='line'>          &lt;/div&gt;
</span><span class='line'>      )
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>module.exports = Demo;</span></code></pre></td></tr></table></div></figure>




<p data-height="624" data-theme-id="0" data-slug-hash="waoLvB" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/waoLvB/'>waoLvB</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>


<h3>Conclusion</h3>

<p>These examples may look boring but they just show off a bit of the control you can have with <code>react-art</code> and a simple path generator.
Not only that but because we aren&rsquo;t depending on the DOM in any case these examples should also work on <code>react-native</code>.
Combined with some tweening you could make some very effective graphs that animate. That is a topic for another time.</p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/canvas/'>canvas</a>, <a class='category' href='/blog/categories/graphing/'>graphing</a>, <a class='category' href='/blog/categories/paths-dot-js/'>paths.js</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-art/'>react-art</a>, <a class='category' href='/blog/categories/svg/'>svg</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/26/animating-with-react-art-and-shifty-dot-js/">Animating with React Art and Shifty.js</a></h1>
		<time>26 May 2015</time>
	</header>
	<div class="content">
		<p>Having little experience with D3 animations I&rsquo;m not sure if it is easy to do animations with D3.
However the great thing about <code>react</code> and <code>react-art</code> is that in order to animate you follow the same pattern you do for any other rendering, just <code>setState</code>.</p>

<p>Animations in CSS3 are different in that a particular element has a defined location and you tell the browser the new location. The inbetween animation state from point a => b over a period of time is automatically handled for you.</p>

<p>In our canvas/svg world we need to <code>tween</code> between states. That just means based on a defined time frame (500ms? 1s? 2s?) we need to move an item form <code>x/y</code> to a new <code>x/y</code>.</p>

<p><a href="https://github.com/jeremyckahn/shifty">Shifty.js</a> helps do that in an efficient manner on the web. The reason <code>shifty.js</code> works well with React is that it doesn&rsquo;t mutate DOM but just provides you the ability to modify numbers across a space of time. Additionally it provides out of the box easing effects like <code>elastic</code>, <code>bounce</code>, <code>linear</code>, <code>cubic</code> and other movements.</p>

<p>This article is less about <code>react-art</code> and more about just how to use <code>shifty.js</code> since <code>react-art</code> is just an extension of <code>react</code>, and if you know the fundamental concepts of <code>react</code> then you can do just about anything.</p>

<p>Example of a basic tween movement</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var tweenable = new Shifty();
</span><span class='line'>        
</span><span class='line'>        tweenable.tween({
</span><span class='line'>          from:     { x: 50, y: 50},
</span><span class='line'>          to:       { x: 200, y: 200 },
</span><span class='line'>          duration: 1000,
</span><span class='line'>          step: function (state) {
</span><span class='line'>            this.setState({
</span><span class='line'>                x: state.x,
</span><span class='line'>                y: state.y
</span><span class='line'>            })
</span><span class='line'>          }.bind(this)
</span><span class='line'>        });
</span></code></pre></td></tr></table></div></figure>


<p>We are saying move from <code>0,0</code> to <code>100,100</code> over <code>1000ms (1 second)</code>.</p>

<p><code>Shifty.js</code> will chunk each step from <code>0</code> to <code>100</code> over <code>1000ms</code> and provide us which each step.</p>

<p>Yes this looks very much like <code>jQuery</code> and it&rsquo;s animate function. They are essentially doing the same thing except <code>jQuery</code> modifies the DOM for you and we are just adjusting a number.</p>

<p>Shifty is just one that I happened to pull up, but there are many other tweening libraries that could be used easily.</p>

<p data-height="624" data-theme-id="0" data-slug-hash="bdByVz" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/bdByVz/'>bdByVz</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>


<p>That&rsquo;s the basics, in a later blog post I&rsquo;ll get into some more complex animations. However any tweening library/phsyics engine that is divorced from the DOM will allow you to maniuplate your data and make your <code>react-art</code> very versatile.</p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/animating/'>animating</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-art/'>react-art</a>, <a class='category' href='/blog/categories/shifty/'>shifty</a>, <a class='category' href='/blog/categories/tween/'>tween</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/20/react-art-zooming-and-dragging/">React Art Zooming and Dragging</a></h1>
		<time>20 May 2015</time>
	</header>
	<div class="content">
		<p>React-art is awesome, you can easily embody the same concepts in React and your visualizations magically work.</p>

<p>I personally have not done a ton of visualization, and the little I have done is mostly rendering graphs with D3.</p>

<p>I&rsquo;ve been tasked with doing a dive for a difficult visualization. We ran into a scenario where we needed the ability to zoom and drag the canvas. D3 conveniently comes with zoom/drag behaviors. D3 integrates pretty well with react-art for doing a lot of the math/generating paths, however after watching <a href="https://www.youtube.com/watch?v=2ii1lEkIv1s">React.js Conf &ndash; Scalable Data Visualization</a> the things immediatley called out that D3 doesn&rsquo;t integrate with react-art are transitions and behaviors (zoom/drag).</p>

<p>So immediately I&rsquo;m thinking about how to accomplish this. Do I need a global scaler that scales all of my coordinates for zooming? Do I need to manage a coordinate system and adjust all of my coordinates with the dragged X/Y offsets.</p>

<p>I googled around, and a few people recommended using <code>canvasEl.getContext('2d').translate(x,y)</code>. I gave this a try with refs, that didn&rsquo;t work.</p>

<p>It did lead me down the right path though. What if I was able to just utilize one global wrapper, and all of my other code could remain unchanged. The great thing about <code>Group</code> is that the coordinate system of the children gets reset, so <code>0,0</code> is now the <code>x,y</code> of the <code>Group</code></p>

<p>Example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Group x={100} y={100}&gt;
</span><span class='line'>    &lt;Circle radius={10} stroke="#000" strokeWidth={3} x={20} y={20}/&gt;
</span><span class='line'>&lt;/Group&gt;</span></code></pre></td></tr></table></div></figure>


<p>The coordinates of the circle on the whole canvas would actually be <code>120,120</code> but because of the group at <code>x = 100, y = 100</code> we just need to say <code>x = 20, y = 20</code>.</p>

<p>Now that we know that our parent coordinate system effects our child coordinate systems lets prove our final theory that we can have one master parent to control zoom/drag.</p>

<p>Lets start with a base renderer</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//Assuming React, and react-art are included
</span><span class='line'>var ZoomDragCircle = React.createClass({
</span><span class='line'>    
</span><span class='line'>    render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;Surface
</span><span class='line'>                width={viewportWidth}
</span><span class='line'>                height={viewportHeight}
</span><span class='line'>            &gt;
</span><span class='line'>            &lt;/Surface&gt; 
</span><span class='line'>        );
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>})
</span></code></pre></td></tr></table></div></figure>


<p>We have a surface so the next lets get something rendering</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ZoomDragCircle = React.createClass({
</span><span class='line'>    
</span><span class='line'>    render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;Surface
</span><span class='line'>                width={viewportWidth}
</span><span class='line'>                height={viewportHeight}
</span><span class='line'>            &gt;
</span><span class='line'>                &lt;Circle x={10} y={10} radius={5} fill="#000" /&gt;
</span><span class='line'>            &lt;/Surface&gt; 
</span><span class='line'>        );
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>})
</span></code></pre></td></tr></table></div></figure>


<p>Lets add in our drag concept.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ZoomDragCircle = React.createClass({
</span><span class='line'>    getInitialState: function() {
</span><span class='line'>        return {
</span><span class='line'>            x: 0,
</span><span class='line'>            y: 0
</span><span class='line'>        }
</span><span class='line'>    },
</span><span class='line'>    handleMouseDown: function() {
</span><span class='line'>        this.dragging = true;
</span><span class='line'>    },
</span><span class='line'>    handleMouseUp: function() {
</span><span class='line'>        this.dragging = false;
</span><span class='line'>    },
</span><span class='line'>    render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;div 
</span><span class='line'>                    onMouseDown={this.handleMouseDown}
</span><span class='line'>                    onMouseUp={this.handleMouseUp}
</span><span class='line'>            &gt;
</span><span class='line'>                &lt;Surface
</span><span class='line'>                    width={viewportWidth}
</span><span class='line'>                    height={viewportHeight}
</span><span class='line'>
</span><span class='line'>                &gt;
</span><span class='line'>                    &lt;Group x={this.state.x} y={this.state.y}&gt;
</span><span class='line'>                        &lt;Circle x={10} y={10} radius={5} fill="#000" /&gt;
</span><span class='line'>                    &lt;/Group&gt;
</span><span class='line'>                &lt;/Surface&gt; 
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        );
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>})
</span></code></pre></td></tr></table></div></figure>


<p>One thing you&rsquo;ll notice here is the wrapping div. The <code>react-art</code> <code>Surface</code> element doesn&rsquo;t have the <code>EventMixin</code> so it will not register mouse events. We could wrap our <code>Group</code> with another <code>Group</code> for dragging/zoom however an outer <code>div</code> is much easier for now.</p>

<p>You also may notice that we have a slight issue. <code>onMouseUp</code> should be globally on the <code>document</code> since the <code>mouseup</code> event will only be fired if the <code>mouseup</code> happens on our wrapping div. For simplicity sake we&rsquo;ll keep it on the div.</p>

<p>So we have a way to toggle whether we are dragging or not, and have the ability to adjust the <code>x,y</code> coords of a parent group. Lets actually implement drag.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ZoomDragCircle = React.createClass({
</span><span class='line'>    getInitialState: function() {
</span><span class='line'>        return {
</span><span class='line'>            x: 0,
</span><span class='line'>            y: 0
</span><span class='line'>        }
</span><span class='line'>    },
</span><span class='line'>    componentDidMount: function() {
</span><span class='line'>        document.addEventListener('mousemove', this.handleMouseMove, false);
</span><span class='line'>    },
</span><span class='line'>    componentWillUnmount: function() {
</span><span class='line'>        //Don't forget to unlisten!
</span><span class='line'>        document.removeEventListener('mousemove', this.handleMouseMove, false);
</span><span class='line'>    },
</span><span class='line'>    handleMouseDown: function(e) {
</span><span class='line'>        this.dragging = true;
</span><span class='line'>        //Set coords
</span><span class='line'>          this.coords = {
</span><span class='line'>            x: e.pageX,
</span><span class='line'>            y: e.pageY
</span><span class='line'>          }
</span><span class='line'>    },
</span><span class='line'>    handleMouseUp: function() {
</span><span class='line'>        this.dragging = false;
</span><span class='line'>        this.coords = {};
</span><span class='line'>    },
</span><span class='line'>    handleMouseMove: function(e) {
</span><span class='line'>    //If we are dragging
</span><span class='line'>      if (this.dragging) {
</span><span class='line'>          e.preventDefault();
</span><span class='line'>
</span><span class='line'>        //Get mouse change differential
</span><span class='line'>        var xDiff = this.coords.x - e.pageX,
</span><span class='line'>            yDiff = this.coords.y - e.pageY;
</span><span class='line'>
</span><span class='line'>        //Update to our new coordinates
</span><span class='line'>            this.coords.x = e.pageX;
</span><span class='line'>            this.coords.y = e.pageY;
</span><span class='line'>        //Adjust our x,y based upon the x/y diff from before
</span><span class='line'>        var x = this.state.x - xDiff,       
</span><span class='line'>            y = this.state.y - yDiff;
</span><span class='line'>
</span><span class='line'>        //Re-render
</span><span class='line'>        this.setState(this.state);  
</span><span class='line'>      }
</span><span class='line'>
</span><span class='line'>    },
</span><span class='line'>    render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;div 
</span><span class='line'>                    onMouseDown={this.handleMouseDown}
</span><span class='line'>                    onMouseUp={this.handleMouseUp}
</span><span class='line'>            &gt;
</span><span class='line'>                &lt;Surface
</span><span class='line'>                    width={viewportWidth}
</span><span class='line'>                    height={viewportHeight}
</span><span class='line'>
</span><span class='line'>                &gt;
</span><span class='line'>                    &lt;Group x={this.state.x} y={this.state.y}&gt;
</span><span class='line'>                        &lt;Circle x={10} y={10} radius={5} fill="#000" /&gt;
</span><span class='line'>                    &lt;/Group&gt;
</span><span class='line'>                &lt;/Surface&gt; 
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        );
</span><span class='line'>    }
</span><span class='line'>})
</span></code></pre></td></tr></table></div></figure>


<p>Now if you spin this up you&rsquo;ll see we can drag around the canvas and our <code>Circle</code> will stay the same place.
Lets do zoom now.</p>

<p>To understand what we&rsquo;re about to do the Art library will translate our <code>x,y</code> coords to a <code>matrix</code> that is set on the <code>transform</code> attribute of the svg <code>g</code> element or in the canvas case translated to the appropriate coordinates.</p>

<p>The <code>matrix</code> system can be read about here on <a href="https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix">MDN</a>. Ultimately it allows us to modify the coordinate system (<code>x,y</code>) and additionally the scale.</p>

<p>Think of scale as a default multiplier times the size of stuff.</p>

<p>So a scale of <code>1</code> means if something is a width of <code>10</code> then it would still be 10.
But If we set our scale to <code>2</code> and the same width of <code>10</code> then <code>10*2 = 20</code>. The item would appear larger at 20 pixels.</p>

<p>This is the rough idea behind scale, however we aren&rsquo;t adjusting widths the scale is actually effecting the <code>x,y</code> coordinates you are setting. You can define <code>scaleX</code> and <code>scaleY</code> to be different numbers causing your visual elements to appear blurred/skewed.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ZoomDragCircle = React.createClass({
</span><span class='line'>    getInitialState: function() {
</span><span class='line'>        return {
</span><span class='line'>            x: 0,
</span><span class='line'>            y: 0,
</span><span class='line'>            scale: 1
</span><span class='line'>        }
</span><span class='line'>    },
</span><span class='line'>    componentDidMount: function() {
</span><span class='line'>        document.addEventListener('mousemove', this.handleMouseMove, false);
</span><span class='line'>    },
</span><span class='line'>    componentWillUnmount: function() {
</span><span class='line'>        //Don't forget to unlisten!
</span><span class='line'>        document.removeEventListener('mousemove', this.handleMouseMove, false);
</span><span class='line'>    },
</span><span class='line'>    handleMouseDown: function(e) {
</span><span class='line'>        this.dragging = true;
</span><span class='line'>        //Set coords
</span><span class='line'>          this.coords = {
</span><span class='line'>            x: e.pageX,
</span><span class='line'>            y: e.pageY
</span><span class='line'>          }
</span><span class='line'>    },
</span><span class='line'>    handleMouseUp: function() {
</span><span class='line'>        this.dragging = false;
</span><span class='line'>        this.coords = {};
</span><span class='line'>    },
</span><span class='line'>    handleMouseMove: function(e) {
</span><span class='line'>    //If we are dragging
</span><span class='line'>      if (!this.dragging) {
</span><span class='line'>        return;
</span><span class='line'>      }
</span><span class='line'>          e.preventDefault();
</span><span class='line'>
</span><span class='line'>        //Get mouse change differential
</span><span class='line'>        var xDiff = this.coords.x - e.pageX,
</span><span class='line'>            yDiff = this.coords.y - e.pageY;
</span><span class='line'>
</span><span class='line'>        //Update to our new coordinates
</span><span class='line'>            this.coords.x = e.pageX;
</span><span class='line'>            this.coords.y = e.pageY;
</span><span class='line'>        //Adjust our x,y based upon the x/y diff from before
</span><span class='line'>        var x = this.state.x - xDiff,       
</span><span class='line'>            y = this.state.y - yDiff;
</span><span class='line'>
</span><span class='line'>        //Re-render
</span><span class='line'>        this.setState(this.state);  
</span><span class='line'>
</span><span class='line'>    },
</span><span class='line'>    //So we can handle the mousewheel returning -0 or 0
</span><span class='line'>    isNegative: function (n) {
</span><span class='line'>      return ((n = +n) || 1 / n) &lt; 0;
</span><span class='line'>    },
</span><span class='line'>    handleMouseWheel: function(e) {
</span><span class='line'>      var ZOOM_STEP = .03;
</span><span class='line'>
</span><span class='line'>        //require the shift key to be pressed to scroll
</span><span class='line'>        if (!e.shiftKey) {
</span><span class='line'>            return;
</span><span class='line'>        }
</span><span class='line'>      e.preventDefault();
</span><span class='line'>      var direction = (this.isNegative(e.deltaX) &&  this.isNegative(e.deltaY) ) ? 'down' : 'up';
</span><span class='line'>
</span><span class='line'>      if (direction == 'up') {
</span><span class='line'>        this.state.scale += ZOOM_STEP;
</span><span class='line'>      } else {
</span><span class='line'>        this.state.scale -= ZOOM_STEP;
</span><span class='line'>      }
</span><span class='line'>
</span><span class='line'>      this.state.scale = this.state.scale &lt; 0 ? 0 : this.state.scale;
</span><span class='line'>
</span><span class='line'>      this.setState(this.state);
</span><span class='line'>    },
</span><span class='line'>    render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;div 
</span><span class='line'>                onMouseDown={this.handleMouseDown}
</span><span class='line'>                onMouseUp={this.handleMouseUp}
</span><span class='line'>                onWheel={this.handleMouseWheel}
</span><span class='line'>            &gt;
</span><span class='line'>                &lt;Surface
</span><span class='line'>                    width={viewportWidth}
</span><span class='line'>                    height={viewportHeight}
</span><span class='line'>
</span><span class='line'>                &gt;
</span><span class='line'>                    &lt;Group 
</span><span class='line'>                        x={this.state.x} 
</span><span class='line'>                        y={this.state.y}
</span><span class='line'>                        scaleX={this.state.scale}
</span><span class='line'>                        scaleY={this.state.scale}
</span><span class='line'>                    &gt;
</span><span class='line'>                        &lt;Circle x={10} y={10} radius={5} fill="#000" /&gt;
</span><span class='line'>                    &lt;/Group&gt;
</span><span class='line'>                &lt;/Surface&gt; 
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        );
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>})
</span></code></pre></td></tr></table></div></figure>


<p>Full working demo, hold shift and use your mouse wheel/track pad to zoom or just grab and drag around.</p>

<p data-height="624" data-theme-id="0" data-slug-hash="jPMMao" data-default-tab="result" data-user="browniefed" class='codepen'>See the Pen <a href='http://codepen.io/browniefed/pen/jPMMao/'>jPMMao</a> by Jason Brown (<a href='http://codepen.io/browniefed'>@browniefed</a>) on <a href='http://codepen.io'>CodePen</a>.</p>


<script async src="//assets.codepen.io/assets/embed/ei.js"></script>


<p>Now we should be able to zoom in/zoom out while holding shift key + using your scroll wheel.
If you want a predictable scale you can add some <code>+</code> and <code>-</code> buttons somwhere and just increment <code>this.state.scale</code></p>

<p>I&rsquo;m hoping to do more write ups and examples with react-art. The great thing is that you can render react-art with react-native. With appropriate abstractions you could possibly have the same visualizations on the web as you do on native.</p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/canvas/'>canvas</a>, <a class='category' href='/blog/categories/d3/'>d3</a>, <a class='category' href='/blog/categories/dragging/'>dragging</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-art/'>react-art</a>, <a class='category' href='/blog/categories/svg/'>svg</a>, <a class='category' href='/blog/categories/zooming/'>zooming</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/16/react-native-and-socket-dot-io/">React Native and Socket.io</a></h1>
		<time>16 May 2015</time>
	</header>
	<div class="content">
		<p>React Native finally supports Websockets. Which is awesome, however there is one gotcha with socket.io.</p>

<p>1) <code>npm install socket.io-client</code>. This will just pull down the socket.io javascript client</p>

<p>2) Everything works great but there is one issue that <code>window.navigator.userAgent</code> doesn&rsquo;t exist. Socket.IO checks to deal with some browser incosistencies but we don&rsquo;t care. So all we have to do is create it. However make sure you require <code>react-native</code> first!</p>

<p>Just like so</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react-native');
</span><span class='line'>
</span><span class='line'>window.navigator.userAgent = "react-native";
</span><span class='line'>
</span><span class='line'>var io = require('socket.io-client/socket.io');</span></code></pre></td></tr></table></div></figure>


<p>Now you can do as you please with your new glorious websockets.</p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/native/'>native</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/socket-dot-io/'>socket.io</a>, <a class='category' href='/blog/categories/websocket/'>websocket</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/03/getting-react-art-running-on-react-native/">Getting react-art running on react-native</a></h1>
		<time>03 May 2015</time>
	</header>
	<div class="content">
		<p>I hadn&rsquo;t realized that the react-art native rendering stuff had landed in into the react-native core.
So I figured I&rsquo;d try and get in running. I am an XCode noob so I&rsquo;ll be sure and be descriptive.</p>

<p>First off lets set up a react-native project. (Assuming you have react-native cli installed);</p>

<p><code>react-native init react_art_demo</code></p>

<p>The current released version of <code>react-native</code> doesn&rsquo;t have the ART libs in it so in our <code>node_modules</code> folder we can delete the <code>react-native</code> in there and do a git clone of master <code>git clone https://github.com/facebook/react-native.git</code></p>

<p>We will also need the <code>art</code> lib itself installed. So <code>cd</code> to the root of <code>react_art_demo</code>.
Then run <code>npm install art</code></p>

<p>Once we have the master repo of <code>react-native</code>, and <code>art</code> installed we can open up our <code>react_art_demo</code> project in XCode.</p>

<p>We will need to do 2 things.</p>

<ul>
<li>Add the <code>ART.xcodeproj</code> to XCode</li>
<li>Link the binary</li>
</ul>


<p>To add ART.xcodeproj find the file located in <code>react-native/Libraries/ART/ART.xcodeproj</code> and just drag it over to the <code>Libraries</code> section in XCode.
That should look like so</p>

<p><img src="http://i.imgur.com/TWeDUTa.png" title="Add ART.xcodeproj to Libraries" ></p>

<p>Next we&rsquo;ll link the binary.</p>

<p>With the root <code>react_art_demo</code> project selected on the left, select <code>Build Phases</code> from the center view.
There will be a section called &ldquo;Link Binary With Libraries&rdquo;, expand it, press the + and select <code>libART.a</code></p>

<p>Like so</p>

<p><img src="http://i.imgur.com/lIMZkfh.png" title="Link binary" ></p>

<p>Just as a warning, I didn&rsquo;t link the binary and got a few &ldquo;No manager class found for view with module name&rdquo; errors.</p>

<p>Now go forth and write your <code>react-art</code>. I always like to get the <code>vector-widget</code> example running so to do that here is the code.</p>

<p><code>index.ios.js</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/**
</span><span class='line'> * Sample React Native App
</span><span class='line'> * https://github.com/facebook/react-native
</span><span class='line'> */
</span><span class='line'>'use strict';
</span><span class='line'>
</span><span class='line'>var React = require('react-native');
</span><span class='line'>var {
</span><span class='line'>  AppRegistry,
</span><span class='line'>  StyleSheet,
</span><span class='line'>  Text,
</span><span class='line'>  View,
</span><span class='line'>} = React;
</span><span class='line'>
</span><span class='line'>var VectorWidget = require('./VectorWidget');
</span><span class='line'>
</span><span class='line'>var react_art_demo = React.createClass({
</span><span class='line'>
</span><span class='line'>  render: function() {
</span><span class='line'>    return (
</span><span class='line'>      &lt;View style={styles.container}&gt;
</span><span class='line'>        &lt;VectorWidget style={styles.vector}/&gt;
</span><span class='line'>      &lt;/View&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>var styles = StyleSheet.create({
</span><span class='line'>  container: {
</span><span class='line'>    flex: 1,
</span><span class='line'>    alignItems: 'center',
</span><span class='line'>    backgroundColor: '#FFF',
</span><span class='line'>  },
</span><span class='line'>  vector: {
</span><span class='line'>    width: 100,
</span><span class='line'>    height: 100
</span><span class='line'>  },
</span><span class='line'>  welcome: {
</span><span class='line'>    fontSize: 20,
</span><span class='line'>    textAlign: 'center',
</span><span class='line'>    margin: 10,
</span><span class='line'>  },
</span><span class='line'>  instructions: {
</span><span class='line'>    color: '#333333',
</span><span class='line'>    marginBottom: 5,
</span><span class='line'>    marginTop: 100
</span><span class='line'>  },
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>AppRegistry.registerComponent('react_art_demo', () =&gt; react_art_demo);</span></code></pre></td></tr></table></div></figure>


<p>And your <code>VectorWidget.js</code> file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/**
</span><span class='line'> * Copyright 2013 Facebook, Inc.
</span><span class='line'> * All rights reserved.
</span><span class='line'> *
</span><span class='line'> * This source code is licensed under the BSD-style license found in the
</span><span class='line'> * LICENSE file in the root directory of this source tree. An additional grant
</span><span class='line'> * of patent rights can be found in the PATENTS file in the same directory.
</span><span class='line'> */
</span><span class='line'>"use strict";
</span><span class='line'>
</span><span class='line'>var React = require('react-native');
</span><span class='line'>var ReactArt = require('./node_modules/react-native/Libraries/ART/ReactIOSART');
</span><span class='line'>var {
</span><span class='line'>    Art,
</span><span class='line'>    TouchableWithoutFeedback
</span><span class='line'>} = React;
</span><span class='line'>
</span><span class='line'>var {
</span><span class='line'>    Group,
</span><span class='line'>    Shape,
</span><span class='line'>    Surface,
</span><span class='line'>    Transform
</span><span class='line'>} = ReactArt;
</span><span class='line'>
</span><span class='line'>var MOUSE_UP_DRAG = 0.978;
</span><span class='line'>var MOUSE_DOWN_DRAG = 0.9;
</span><span class='line'>var MAX_VEL = 11;
</span><span class='line'>var CLICK_ACCEL = 3;
</span><span class='line'>var BASE_VEL = 0.15;
</span><span class='line'>
</span><span class='line'>/**
</span><span class='line'> * An animated SVG component.
</span><span class='line'> */
</span><span class='line'>var VectorWidget = React.createClass({
</span><span class='line'>  /**
</span><span class='line'>   * Initialize state members.
</span><span class='line'>   */
</span><span class='line'>  getInitialState: function() {
</span><span class='line'>    return {degrees: 0, velocity: 0, drag: MOUSE_UP_DRAG};
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  /**
</span><span class='line'>   * When the component is mounted into the document - this is similar to a
</span><span class='line'>   * constructor, but invoked when the instance is actually mounted into the
</span><span class='line'>   * document. Here's, we'll just set up an animation loop that invokes our
</span><span class='line'>   * method. Binding of `this.onTick` is not needed because all React methods
</span><span class='line'>   * are automatically bound before being mounted.
</span><span class='line'>   */
</span><span class='line'>  componentDidMount: function() {
</span><span class='line'>    this._interval = window.setInterval(this.onTick, 20);
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  componentWillUnmount: function() {
</span><span class='line'>    window.clearInterval(this._interval);
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  onTick: function() {
</span><span class='line'>    var nextDegrees = this.state.degrees + BASE_VEL + this.state.velocity;
</span><span class='line'>    var nextVelocity = this.state.velocity * this.state.drag;
</span><span class='line'>    this.setState({degrees: nextDegrees, velocity: nextVelocity});
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  /**
</span><span class='line'>   * This is the "main" method for any component. The React API allows you to
</span><span class='line'>   * describe the structure of your UI component at *any* point in time.
</span><span class='line'>   */
</span><span class='line'>  render: function() {
</span><span class='line'>    return (
</span><span class='line'>      &lt;Surface
</span><span class='line'>        width={700}
</span><span class='line'>        height={700}
</span><span class='line'>        {this.renderGraphic(this.state.degrees)}
</span><span class='line'>      &lt;/Surface&gt;
</span><span class='line'>    );
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  /**
</span><span class='line'>   * Better SVG support for React coming soon.
</span><span class='line'>   */
</span><span class='line'>  renderGraphic: function(rotation) {
</span><span class='line'>
</span><span class='line'>    return (
</span><span class='line'>      &lt;Group
</span><span class='line'>      &gt;
</span><span class='line'>        &lt;Group x={210} y={135}&gt;
</span><span class='line'>          &lt;Shape fill="rgba(0,0,0,0.1)" d={BORDER_PATH} /&gt;
</span><span class='line'>          &lt;Shape fill="#7BC7BA" d={BG_PATH} /&gt;
</span><span class='line'>          &lt;Shape fill="#DCDCDC" d={BAR_PATH} /&gt;
</span><span class='line'>          &lt;Shape fill="#D97B76" d={RED_DOT_PATH} /&gt;
</span><span class='line'>          &lt;Shape fill="#DBBB79" d={YELLOW_DOT_PATH} /&gt;
</span><span class='line'>          &lt;Shape fill="#A6BD8A" d={GREEN_DOT_PATH} /&gt;
</span><span class='line'>          &lt;Group x={55} y={29}&gt;
</span><span class='line'>            &lt;Group rotation={rotation} originX={84} originY={89}&gt;
</span><span class='line'>              &lt;Shape fill="#FFFFFF" d={CENTER_DOT_PATH} /&gt;
</span><span class='line'>              &lt;Group&gt;
</span><span class='line'>                &lt;Shape d={RING_ONE_PATH} stroke="#FFFFFF" strokeWidth={8} /&gt;
</span><span class='line'>                &lt;Shape d={RING_TWO_PATH} transform={RING_TWO_ROTATE} stroke="#FFFFFF" strokeWidth={8} /&gt;
</span><span class='line'>                &lt;Shape d={RING_THREE_PATH} transform={RING_THREE_ROTATE} stroke="#FFFFFF" strokeWidth={8} /&gt;
</span><span class='line'>              &lt;/Group&gt;
</span><span class='line'>            &lt;/Group&gt;
</span><span class='line'>          &lt;/Group&gt;
</span><span class='line'>        &lt;/Group&gt;
</span><span class='line'>      &lt;/Group&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>var BORDER_PATH = "M3.00191459,4 C1.34400294,4 0,5.34785514 0,7.00550479 L0,220.994495 C0,222.65439 1.34239483,224 3.00191459,224 L276.998085,224 C278.655997,224 280,222.652145 280,220.994495 L280,7.00550479 C280,5.34561033 278.657605,4 276.998085,4 L3.00191459,4 Z M3.00191459,4";
</span><span class='line'>var BG_PATH = "M3.00191459,1 C1.34400294,1 0,2.34785514 0,4.00550479 L0,217.994495 C0,219.65439 1.34239483,221 3.00191459,221 L276.998085,221 C278.655997,221 280,219.652145 280,217.994495 L280,4.00550479 C280,2.34561033 278.657605,1 276.998085,1 L3.00191459,1 Z M3.00191459,1";
</span><span class='line'>var BAR_PATH = "M3.00191459,0 C1.34400294,0 0,1.34559019 0,3.00878799 L0,21 C0,21 0,21 0,21 L280,21 C280,21 280,21 280,21 L280,3.00878799 C280,1.34708027 278.657605,0 276.998085,0 L3.00191459,0 Z M3.00191459,0";
</span><span class='line'>var RED_DOT_PATH = "M12.5,17 C16.0898511,17 19,14.0898511 19,10.5 C19,6.91014895 16.0898511,4 12.5,4 C8.91014895,4 6,6.91014895 6,10.5 C6,14.0898511 8.91014895,17 12.5,17 Z M12.5,17";
</span><span class='line'>var YELLOW_DOT_PATH = "M31.5,17 C35.0898511,17 38,14.0898511 38,10.5 C38,6.91014895 35.0898511,4 31.5,4 C27.9101489,4 25,6.91014895 25,10.5 C25,14.0898511 27.9101489,17 31.5,17 Z M31.5,17";
</span><span class='line'>var GREEN_DOT_PATH = "M50.5,17 C54.0898511,17 57,14.0898511 57,10.5 C57,6.91014895 54.0898511,4 50.5,4 C46.9101489,4 44,6.91014895 44,10.5 C44,14.0898511 46.9101489,17 50.5,17 Z M50.5,17";
</span><span class='line'>var CENTER_DOT_PATH = "M84,105 C92.8365564,105 100,97.8365564 100,89 C100,80.1634436 92.8365564,73 84,73 C75.1634436,73 68,80.1634436 68,89 C68,97.8365564 75.1634436,105 84,105 Z M84,105";
</span><span class='line'>var RING_ONE_PATH = "M84,121 C130.391921,121 168,106.673113 168,89 C168,71.3268871 130.391921,57 84,57 C37.6080787,57 0,71.3268871 0,89 C0,106.673113 37.6080787,121 84,121 Z M84,121";
</span><span class='line'>var RING_TWO_PATH = "M84,121 C130.391921,121 168,106.673113 168,89 C168,71.3268871 130.391921,57 84,57 C37.6080787,57 0,71.3268871 0,89 C0,106.673113 37.6080787,121 84,121 Z M84,121";
</span><span class='line'>var RING_THREE_PATH = "M84,121 C130.391921,121 168,106.673113 168,89 C168,71.3268871 130.391921,57 84,57 C37.6080787,57 0,71.3268871 0,89 C0,106.673113 37.6080787,121 84,121 Z M84,121";
</span><span class='line'>var RING_TWO_ROTATE = new Transform().translate(84.000000, 89.000000).rotate(-240.000000).translate(-84.000000, -89.000000);
</span><span class='line'>var RING_THREE_ROTATE = new Transform().translate(84.000000, 89.000000).rotate(-300.000000).translate(-84.000000, -89.000000);
</span><span class='line'>
</span><span class='line'>module.exports = VectorWidget;</span></code></pre></td></tr></table></div></figure>


<p>You may notice that I removed the <code>mouseDown/mouseUp</code> stuff.
I tried getting it work very briefly with <code>onPress</code> and <code>TouchableWithoutFeedback</code> but I couldn&rsquo;t get it working.
If you get it figured out let me know.</p>

<h2>Conclusion</h2>

<p>That&rsquo;s it, you can now render your react-art code natively. Enjoy</p>

<p><img src="http://i.imgur.com/AXbsaTB.png" title="Final result" ></p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-art/'>react-art</a>, <a class='category' href='/blog/categories/react-native/'>react-native</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/05/02/react/">React, Higher Order Components, and Legacy Applications</a></h1>
		<time>02 May 2015</time>
	</header>
	<div class="content">
		<p>At work we embarked on an ambitious task of converting our legacy application (ExtJS 3.4) over to React.
Now obviously rewriting an application that has been built over the course of 7 years could not just be simply re-written. We had to be very strategic about it.</p>

<p>React is one of the perfect rendering libraries for this since re-rendering the same component at the same spot will just cause the React to go through its diff/normal rendering process.</p>

<p>However if you don&rsquo;t maintain separation of concerns you may just get a lot of Ext into your ReactJS components, and you&rsquo;ll be in an even bigger mess. We don&rsquo;t want that, and that is where higher order components come into play.</p>

<h3>Higher Order Components</h3>

<p>If you haven&rsquo;t read the post <a href="https://medium.com/@dan_abramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750">Mixins Are Dead. Long Live Composition</a> then I highly recommend you do so. Higher order components are not a bullet proof replacement for mixins but they are an amazing solution for integrating at the seams of where your legacy application meets your new React world.</p>

<p>If you don&rsquo;t understand what a Higher order component is after reading the article above let me quickly explain.
It&rsquo;s a function that takes a React component of your choosing and then returns a wrapped React component that renders the React component that you provided it.</p>

<p>A Quick example</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>var NameSupplier = function(Component) {
</span><span class='line'>    
</span><span class='line'>    var NameSupplierComponent = React.createClass({
</span><span class='line'>
</span><span class='line'>        getUserName: function() {
</span><span class='line'>            //Somewhere the username is stored but we'll just return a string
</span><span class='line'>            return "Jason"
</span><span class='line'>        },
</span><span class='line'>        render: function() {
</span><span class='line'>
</span><span class='line'>            return (
</span><span class='line'>                &lt;Component username={this.getUserName()} /&gt;
</span><span class='line'>            )
</span><span class='line'>        }
</span><span class='line'>    });
</span><span class='line'>
</span><span class='line'>    return NameSupplierComponent;
</span><span class='line'>}
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>This component is slightly contrived and doesn&rsquo;t show this will help us integrate with a legacy app. All this component is doing is passing down a prop to a component you gave it.
So how would we go about using this higher order component?</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var UserPost = React.createClass({
</span><span class='line'>    render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;div&gt;
</span><span class='line'>                {this.props.username} created this.
</span><span class='line'>            &lt;/div&gt;
</span><span class='line'>        )
</span><span class='line'>    }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>var ActiveUserPost = NameSupplier(UserPost);
</span><span class='line'>
</span><span class='line'>module.exports = ActiveUserPost;
</span></code></pre></td></tr></table></div></figure>


<p>Then later</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ActiveUserPost = require('ActiveUserPost');
</span><span class='line'>
</span><span class='line'>React.render(&lt;ActiveUserPost /&gt;, el);</span></code></pre></td></tr></table></div></figure>


<h3>Using them with legacy applications</h3>

<p>This strategy really shines when all you need to do is hook into the life cycle events to cause updates in your legacy application.</p>

<p>In our application we are still utilizing ExtJS tabs. When you visit an item say we render an <code>ItemView</code> and say the user starts editing the item. We want to indicate in the title of the Ext tab that it is a dirty form and that is done by marking it with an *. The issue is that as we deprecate Ext we don&rsquo;t want to mix our Ext updating logic with our new <code>ItemView</code> logic.</p>

<p>This requires that state be at an upper level, which the article above by Dan shows how to use higher order components to fetch data, and essentially bring state up one level.</p>

<p>The structure of our application will look like so</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;ExtTab&gt; // Passes down a function called appendTitle
</span><span class='line'>    &lt;ItemViewState&gt; &lt;--- Could and should also be a higher order component taht wraps ExtEditableItemView but for visual sake it's a composition component
</span><span class='line'>        &lt;ExtEditableItemView /&gt; &lt;--- This is an ItemView wrapped by an ExtEditable higher order component
</span><span class='line'>    &lt;/ItemViewState&gt;
</span><span class='line'>&lt;/ExtTab&gt;
</span></code></pre></td></tr></table></div></figure>


<p>With state moved up a level into the <code>ItemViewState</code> component any time data changes our <code>ExtEditableItemView</code> will go re-render and go through it&rsquo;s life cycle methods.</p>

<p>The requirement here is that the <code>ExtTab</code> in our old world passes down a function as a prop which our higher order component will call.</p>

<p>In the end our code looks like this</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ExtEditableTitle = function(Component) {
</span><span class='line'>    propTypes: {
</span><span class='line'>        appendTitle: React.PropTypes.func
</span><span class='line'>    },
</span><span class='line'>    getDefaultProps: function() {
</span><span class='line'>        return {
</span><span class='line'>            appendTitle: function() {} //Noop function
</span><span class='line'>        }
</span><span class='line'>    },   
</span><span class='line'>    componentDidMount: function() {
</span><span class='line'>        this.handleTitleUpdate();
</span><span class='line'>    },
</span><span class='line'>    componentDidUpdate: function() {
</span><span class='line'>        this.handleTitleUpdate();
</span><span class='line'>    },
</span><span class='line'>    handleTitleUpdate: function() {
</span><span class='line'>        var appendToTitle = (this.props.editing && '*' || ''); // If we're editing then append a * to the title
</span><span class='line'>        this.props.appendTitle(appendToTitle);
</span><span class='line'>    },
</span><span class='line'>    render: function() {
</span><span class='line'>        return (
</span><span class='line'>            &lt;Component
</span><span class='line'>                {...this.props}
</span><span class='line'>                {//Additionally we should omit the appendTitle function from being passed down to our ItemView}
</span><span class='line'>            /&gt;
</span><span class='line'>        )
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ExtEditableItemView = ExtEditableTitle(ItemView);
</span><span class='line'>module.exports = ExtEditableItemView;</span></code></pre></td></tr></table></div></figure>


<p>So now we have moved our state up a level to <code>ItemViewState</code>, we used a higher order component to make a seam that hooks into the life cycle events of our <code>ItemView</code> component which tells our old world what to do with it&rsquo;s title.</p>

<p>When it comes time to remove Ext tabs, or possibly replace it with adding a * to the browser title we can write a new higher order component that hooks into the same life cycle methods and our <code>ItemView</code> is none the wiser.</p>

<h3>Conclusion</h3>

<p>Higher order components may not solve all of your problems but so far they have helped me in a few different scenarios that would have caused me to mix concerns with our React/ExtJS world. They provide a nice upgrade path for future modifications, and maintain our ability to compose components with ease.</p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/applications/'>applications</a>, <a class='category' href='/blog/categories/components/'>components</a>, <a class='category' href='/blog/categories/ext/'>ext</a>, <a class='category' href='/blog/categories/higher/'>higher</a>, <a class='category' href='/blog/categories/legacy/'>legacy</a>, <a class='category' href='/blog/categories/order/'>order</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/reactjs/'>reactjs</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2014/12/24/webpack-and-compass/">Webpack and Compass</a></h1>
		<time>24 December 2014</time>
	</header>
	<div class="content">
		<p>Webpack is the greatest and latest in build systems. Every time I encounter an issue or wish Webpack did something a little googling solves the problem.</p>

<p>One problem that I couldn&rsquo;t google and figure out was getting compass to work with <code>sass-loader</code>. Not just making it work but still allowing regular compass to compile on the command line.</p>

<p>Thankfully there is a mostly simple solution. The only thing (to my knowledge) that this won&rsquo;t work with is sprite generation. Sounds like we need another loader.</p>

<p>Lets get to it.</p>

<p>This is all assuming you have webpack installed with a basic config.
If that isn&rsquo;t the case we&rsquo;ll need <code>webpack</code>, <code>raw-loader</code>, <code>style-loader</code>, and <code>sass-loader</code> npm installed.</p>

<p>Your webpack config may look something along the lines of</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>    module: {
</span><span class='line'>        loaders: [
</span><span class='line'>            { 
</span><span class='line'>                test: /\.scss$/, 
</span><span class='line'>                loader: "style-loader!raw-loader!sass-loader"
</span><span class='line'>            }
</span><span class='line'>        ]
</span><span class='line'>    }
</span></code></pre></td></tr></table></div></figure>


<p>This is where you&rsquo;re running into your issue where <code>node-sass</code> can&rsquo;t find the compass import.</p>

<p>Thanks to igosuki, compass mixins has been ported to just a bunch of sass-mixins outside of the ruby gem. <a href="https://github.com/Igosuki/compass-mixins.">https://github.com/Igosuki/compass-mixins.</a></p>

<p>So now do a</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install compass-mixins --save
</span></code></pre></td></tr></table></div></figure>


<p>Now we just need to modify our loader config.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>    module: {
</span><span class='line'>        loaders: [
</span><span class='line'>            { 
</span><span class='line'>                test: /\.scss$/, 
</span><span class='line'>                loader: "style-loader!raw-loader!sass-loader?includePaths[]=" + path.resolve(__dirname, "./node_modules/compass-mixins/lib")
</span><span class='line'>            }
</span><span class='line'>        ]
</span><span class='line'>    }
</span></code></pre></td></tr></table></div></figure>


<p>Now <code>node-sass</code> should be all setup to to look in our <code>compass-mixins/lib</code> to resolve compass mixins.
If you are running your build script from a different location you&rsquo;ll have to adjust the <code>path.resolve</code> to resolve to wherever your <code>node_modules</code> is at.</p>

<p>Alternatively you can place this outside of <code>node_modules</code> or add additional <code>include_paths</code> for wherever your SASS mixins live.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>    module: {
</span><span class='line'>        loaders: [
</span><span class='line'>            { 
</span><span class='line'>                test: /\.scss$/, 
</span><span class='line'>                loader: "style-loader!raw-loader!sass-loader?includePaths[]=" + path.resolve(__dirname, "./node_modules/compass-mixins/lib") + "&includePaths[]=" + path.resolve(__dirname, "./mixins/app_mixins")
</span><span class='line'>            }
</span><span class='line'>        ]
</span><span class='line'>    }
</span></code></pre></td></tr></table></div></figure>


	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/compass/'>compass</a>, <a class='category' href='/blog/categories/sass/'>sass</a>, <a class='category' href='/blog/categories/scss/'>scss</a>, <a class='category' href='/blog/categories/webpack/'>webpack</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->

	
	
<div class="pagination">
	
		<a class="older" href="/blog/page/2/">Older</a>
	
	
	<span class="total">1 of 2</span>
	
	
</div>
<!-- END OF index.html -->

		
			<footer>
				Copyright &copy; 2015

	Jason Brown


			</footer>
			
		</div> <!-- // .wrap -->
          

<script type="text/javascript">
      var disqus_shortname = 'browniefedblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


	</body>
	<script>
		$(document).ready(function() {
			// Make images center
			$('p:has(img)').css('text-align', 'center');
			
			// Add the image's title attribute as a caption
			$('p:has(img)').append(function () {
				return '<div class="caption">' + $('img', this).attr('title') + '</div>';
			});
			
			// Prettify code
			$('code').addClass('prettyprint');
			$('pre code').addClass('linenums');
			
			// Copy to clipboard with button
			$('pre:has(code)').prepend(function(){
				return '<div class="clip-btn">copy to clipboard</div>';
			});
			$('.clip-btn').zclip({
				path:'/js/ZeroClipboard.swf',
				copy: $(this).next('code').text(),
				afterCopy: function(){
					$(this).replaceWith('<div class="clip-btn">copied!');
					}
			});
		});
	</script>
    

<script type="text/javascript">
      var disqus_shortname = 'browniefedblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


</html>
<!-- END OF _layouts/default.html -->
