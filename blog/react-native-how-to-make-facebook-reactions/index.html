
<!doctype html>
<!-- START OF _layouts/default.html -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" >
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<meta content="A blog of JavaScript techniques and tutorials. Including React, React Native, and anything else I feel like writing about." name="description">
		<meta content="JavaScript Without Grammar" name="author">


    
        <meta property="fb:app_id" content="1662675577336433" />
        <meta property="og:title" content="React Native - How to make Facebook Reactions" />
        <meta property="og:site_name" content="JavaScript Without Grammar" />
        <meta property="og:url" content="http://browniefed.com/blog/react-native-how-to-make-facebook-reactions/" />
        <meta property="og:description" content="" />
        
    

        
        <meta property="twitter:card" content="summary" />
        <meta property="twitter:site" content="browniefed" />
        <meta property="twitter:url" content="http://browniefed.com/blog/react-native-how-to-make-facebook-reactions/" />
        <meta property="twitter:title" content="React Native - How to make Facebook Reactions" />
        <meta property="twitter:description" content="" />
        <meta property="twitter:creator" content="browniefed" />
        
        


		
        <link rel='alternate' type='application/atom+xml' title='JavaScript Without Grammar' href='http://browniefed.com/atom.xml'>

		<title>React Native - How to make Facebook Reactions &mdash; JavaScript Without Grammar</title>
		
		<!-- Styles -->
		<link href="/stylesheets/main.css" rel="stylesheet">
		
		<!-- Google webfonts -->
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Cousine">
		
		<!-- jQuery and plugins -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script type="text/javascript" src="/js/jquery.zclip.min.js"></script>

		<!-- Syntax highlighter -->
		<link href="/stylesheets/prettify-hemisu.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="/js/prettify.js"></script>
				
	</head>
	<body onload="prettyPrint()">
	
		<div class="wrap">
	
			<header>
				<div class="title"><a href="/">JavaScript Without Grammar</a></div>
								
								<div class="navi">
									<ul>
										<li><a href="/">Blog</a></li>
										<li><a href="/blog/archives">Archives</a></li>
										<li><a href="/about">About</a></li>
										<li><a href="http://github.com/browniefed">Github</a></li>
										<li><a href="http://twitter.com/browniefed">Twitter</a></li>
										<li><a href="mailto:browniefed@gmail.com">Email</a></li>
									<ul>
								</div> <!-- // .navi -->
			</header>
		
				<!-- START OF _layouts/post.html -->

<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/react-native-how-to-make-facebook-reactions/">React Native - How to make Facebook Reactions</a></h1>
		<time>11 October 2015</time>
	</header>
	<div class="content">
		
            <div class="entry-content"><p>Facebook reactions is a new liking system that Facebook is trialing on a limited basis. Why wait for them to roll it out when we can roll it out ourselves</p>

<p>Thanks to <a href="http://www.engadget.com/2015/10/08/facebook-reactions/">Engadget</a> who created a gif of the animations from a youtube video. After a little slicing up and conversion from white to transparent we have a nice bunch of terrible animated gifs&hellip; but they&rsquo;re animated so deal with it. Like/Love aren&rsquo;t transparent since imagmagick was destroying the white in them.</p>

<p><strong>This code will target .12 and above, running on .11 seemed to cause some slightly different layout issues. I&rsquo;ve fixed them on RNPlay, so just a heads up. The difference is add <code>height:50</code> to our <code>likeContainer</code> </strong></p>

<p><strong>Update &ndash; Android:</strong></p>

<p>Animated Gifs are coming to React Native Android in .13. Also Android does not support <code>overflow: visible</code> so in order to get android to work we would need to get creative. On open they sit within the <code>overflow: hidden</code> container, once slid in we&rsquo;d have to move them outside. Although they are gifs, so you&rsquo;d have to find a way to sync em up.</p>

<p>Maybe 2 sets, one slides in, the other is rendered but hidden, then you toggle which is hidden and slide the other up. Fun stuff!</p>

<h2>What are we building</h2>

<p><img src="http://i.imgur.com/dFLU8SI.gif" title="Neato" ></p>

<!-- more -->


<p></p>

<h2>Concept</h2>

<p>While holding down a button a pop up will show up, animated gifs will slide up from the bottom. While sliding and hovering over an item it will slide up slightly and scale up in size. On release of the finger, that item is selected, the images slide down and the pop up disappears.</p>

<p>This doesn&rsquo;t sound too bad, there are a few slight issues we&rsquo;ll run into that I&rsquo;ll call out. The main one is just the border around the container. We get creative with the component structure so the images will animate over the top of the border and not underneath it.</p>

<h2>Setup</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react-native');
</span><span class='line'>var {
</span><span class='line'>  StyleSheet,
</span><span class='line'>  Text,
</span><span class='line'>  Image,
</span><span class='line'>  View,
</span><span class='line'>  PanResponder,
</span><span class='line'>  TouchableOpacity,
</span><span class='line'>  Animated
</span><span class='line'>} = React;
</span><span class='line'>
</span><span class='line'>var images = [
</span><span class='line'>  {id: 'like', img: 'http://i.imgur.com/LwCYmcM.gif'},
</span><span class='line'>  {id: 'love', img: 'http://i.imgur.com/k5jMsaH.gif'},
</span><span class='line'>  {id: 'haha', img: 'http://i.imgur.com/f93vCxM.gif'},
</span><span class='line'>  {id: 'yay', img: 'http://i.imgur.com/a44ke8c.gif'},
</span><span class='line'>  {id: 'wow', img: 'http://i.imgur.com/9xTkN93.gif'},
</span><span class='line'>  {id: 'sad', img: 'http://i.imgur.com/tFOrN5d.gif'},
</span><span class='line'>  {id: 'angry', img: 'http://i.imgur.com/1MgcQg0.gif'}
</span><span class='line'>]
</span><span class='line'>
</span><span class='line'>var App = React.createClass({
</span><span class='line'>  getInitialState: function() {
</span><span class='line'>    return {
</span><span class='line'>      selected: '',
</span><span class='line'>      open: false
</span><span class='line'>    };
</span><span class='line'>  },
</span><span class='line'>  componentWillMount: function() {
</span><span class='line'>    this._imgLayouts = {};
</span><span class='line'>    this._imageAnimations = {};
</span><span class='line'>    this._scaleAnimation = new Animated.Value(0);
</span><span class='line'>
</span><span class='line'>    images.forEach((img) =&gt; {
</span><span class='line'>      this._imageAnimations[img.id] = {
</span><span class='line'>        position: new Animated.Value(55),
</span><span class='line'>        scale: new Animated.Value(1)
</span><span class='line'>      };
</span><span class='line'>    });
</span><span class='line'>
</span><span class='line'>    this._panResponder = PanResponder.create({
</span><span class='line'>      onStartShouldSetPanResponder: (evt, gestureState) =&gt; true,
</span><span class='line'>      onStartShouldSetPanResponderCapture: (evt, gestureState) =&gt; true,
</span><span class='line'>      onMoveShouldSetPanResponder: (evt, gestureState) =&gt; true,
</span><span class='line'>      onMoveShouldSetPanResponderCapture: (evt, gestureState) =&gt; true,
</span><span class='line'>    });
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  render: function() {
</span><span class='line'>    return (
</span><span class='line'>      &lt;View style={styles.container}&gt;
</span><span class='line'>        &lt;View
</span><span class='line'>          style={styles.center}
</span><span class='line'>          {...this._panResponder.panHandlers}
</span><span class='line'>        &gt;
</span><span class='line'>          &lt;Text&gt;Like&lt;/Text&gt;
</span><span class='line'>          &lt;Text&gt;You selected: {this.state.selected}&lt;/Text&gt;
</span><span class='line'>          &lt;Animated.View 
</span><span class='line'>            style={[styles.likeContainer, this.getLikeContainerStyle()]}
</span><span class='line'>          &gt;
</span><span class='line'>            &lt;View style={styles.borderContainer} /&gt;
</span><span class='line'>            &lt;View style={styles.imgContainer}&gt;
</span><span class='line'>              {this.getImages()}
</span><span class='line'>            &lt;/View&gt;
</span><span class='line'>          &lt;/Animated.View&gt;
</span><span class='line'>        &lt;/View&gt;
</span><span class='line'>      &lt;/View&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});
</span></code></pre></td></tr></table></div></figure>


<p>We setup our state, we have a <code>selected</code> which we will use to just display some selected text. Then we have an <code>open</code> which we set to false. I am not showing it yet, but we&rsquo;ll need to use <code>open</code> to dynamically control <code>overflow</code> for the container that holds our images so they can slide around correctly.</p>

<p>In our <code>componentWillMount</code> we setup some objects and create some animations. We&rsquo;ll need the coordinates of each image for selection purposes, we&rsquo;ll also have a map of our image animations, and we&rsquo;ll setup <code>_scaleAnimation</code> which we&rsquo;ll use to scale up the container when a user presses down.</p>

<p>Then we loop over each image, create a position, and scale animation for each. Why <code>55</code> and why not <code>ValueXY</code>? Well we are only animating the Y value so no need to have an extra animation. The <code>55</code> is our initial position, which we pass to <code>translateY</code> meaning, start this image <code>55</code> pixels down so we can eventually slide it up.</p>

<p>Finally we&rsquo;ll create a PanResponder to handle users pressing.</p>

<h2>Handle Press and Open</h2>

<p>So we&rsquo;ll put our <code>panHandlers</code> on our wrapping view so our coordinates are correct relatively for the images. That looks like this</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   &lt;View
</span><span class='line'>      style={styles.center}
</span><span class='line'>      {...this._panResponder.panHandlers}
</span><span class='line'>    &gt;
</span><span class='line'>    ///Other views
</span><span class='line'>    &lt;/View&gt;</span></code></pre></td></tr></table></div></figure>


<p>Then we need to adjust our PanResponder to call an open function on grant. Grant being the first thing that gets called when the touch is allowed.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>this._panResponder = PanResponder.create({
</span><span class='line'>      onStartShouldSetPanResponder: (evt, gestureState) =&gt; true,
</span><span class='line'>      onStartShouldSetPanResponderCapture: (evt, gestureState) =&gt; true,
</span><span class='line'>      onMoveShouldSetPanResponder: (evt, gestureState) =&gt; true,
</span><span class='line'>      onMoveShouldSetPanResponderCapture: (evt, gestureState) =&gt; true,
</span><span class='line'>      onPanResponderGrant: this.open
</span><span class='line'>})</span></code></pre></td></tr></table></div></figure>


<p>Lets adjust our <code>Animated.View</code> container.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  getLikeContainerStyle: function() {
</span><span class='line'>    return {
</span><span class='line'>            transform: [{scaleY: this._scaleAnimation}],
</span><span class='line'>            overflow: this.state.open ? 'visible': 'hidden'
</span><span class='line'>          };
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  //other render components
</span><span class='line'>  &lt;Animated.View 
</span><span class='line'>    style={[styles.likeContainer, this.getLikeContainerStyle()]}
</span><span class='line'>  &gt;
</span><span class='line'>    &lt;View style={styles.borderContainer} /&gt;
</span><span class='line'>    &lt;View style={styles.imgContainer}&gt;
</span><span class='line'>      {this.getImages()}
</span><span class='line'>    &lt;/View&gt;
</span><span class='line'>  &lt;/Animated.View&gt;</span></code></pre></td></tr></table></div></figure>


<p>Now our open function.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  open: function() {
</span><span class='line'>    Animated.parallel([
</span><span class='line'>      Animated.timing(this._scaleAnimation, {
</span><span class='line'>        duration: 100,
</span><span class='line'>        toValue: 1
</span><span class='line'>      }),
</span><span class='line'>      Animated.stagger(50, this.getImageAnimationArray(0))
</span><span class='line'>    ]).start(() =&gt; this.setState({open: true}));
</span><span class='line'>  },
</span><span class='line'>  getImageAnimationArray: function(toValue) {
</span><span class='line'>    return images.map((img) =&gt; {
</span><span class='line'>      return Animated.timing(this._imageAnimations[img.id].position, {
</span><span class='line'>        duration: 200,
</span><span class='line'>        toValue: toValue
</span><span class='line'>      })
</span><span class='line'>    });
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>We&rsquo;ll queue up some <code>parallel</code> animations so they run at the same time. The first is the initial scaling of the container. We&rsquo;ll do it over <code>100ms</code>, and go from 0 to 1.
The next thing we&rsquo;ll do is use <code>Animated.stagger</code>, this will trigger an array of animations, but with a delay in between each one. That means we can easily slide up each image reaction separately with <code>50ms</code> inbetween. What a handy function.</p>

<p>So we&rsquo;ll do a little forward thinking and create a <code>getImageAnimationArray</code> function because we&rsquo;ll have to do the exact opposite for the <code>close</code> so lets make a reusable function.</p>

<p>Finally we&rsquo;ll <code>setState</code> AFTER the animation is complete. This will not cause a jitter in our animation. This also allows the container to hide the images to start so they slide up. Then after the container is open we set <code>overflow: visible</code> so we can scale and slide them up and they&rsquo;ll actually be visible. If we don&rsquo;t do this then the images won&rsquo;t be able visible when the user tries to select them.</p>

<h2>Handle release and close</h2>

<p>Now modify the <code>_panResponder</code> for the release to close it, we basically just do the exact opposite of open.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  onPanResponderRelease: (evt, gestureState) =&gt; {
</span><span class='line'>     this.close()
</span><span class='line'>  }</span></code></pre></td></tr></table></div></figure>


<p>And our close function</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  close: function(cb) {
</span><span class='line'>    this.setState({open: false}, () =&gt; {
</span><span class='line'>      Animated.stagger(100,[
</span><span class='line'>        Animated.parallel(this.getImageAnimationArray(55, 0).reverse() ),
</span><span class='line'>        Animated.timing(this._scaleAnimation, {
</span><span class='line'>          duration: 100,
</span><span class='line'>          toValue: 0
</span><span class='line'>        })
</span><span class='line'>      ]).start(cb);
</span><span class='line'>    })
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>We need to do a setState to make the containers overflow hidden. This is tricky because it&rsquo;ll instantly cause anything selected to be hidden. So we&rsquo;ll need to account for this in our release function later. But at the moment, we set <code>open</code> to false.</p>

<p>Rather than parallel we&rsquo;ll stagger our 2 animations. Our first will start and cause our reaction gifs to all slide down at the same time. Then <code>100ms</code> later we&rsquo;ll scale the container down to 0. This just adds a slight disappearing effect.</p>

<h2>Calculate image positions</h2>

<p>Before we can do image selections we need to know where our images coordinates are. Luckily we can do that with the <code>onLayout</code> callback.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  getImages: function() {
</span><span class='line'>    return images.map((img) =&gt; {
</span><span class='line'>      return (
</span><span class='line'>        &lt;Animated.Image 
</span><span class='line'>          onLayout={this.handleLayoutPosition.bind(this, img.id)}
</span><span class='line'>          key={img.id} 
</span><span class='line'>          source={{uri: img.img}} 
</span><span class='line'>          style={[
</span><span class='line'>              styles.img,
</span><span class='line'>              {
</span><span class='line'>                transform: [
</span><span class='line'>                  {scale: this._imageAnimations[img.id].scale},
</span><span class='line'>                  {translateY: this._imageAnimations[img.id].position}
</span><span class='line'>                ]
</span><span class='line'>              }
</span><span class='line'>          ]} 
</span><span class='line'>        /&gt;
</span><span class='line'>      );
</span><span class='line'>    })
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>This is our image rendering function. It iterates over our images, passes in all necesary info and binds our <code>onLayout</code> function with the <code>image.id</code> which is just the reaction name. You can see here we also pass in our transform animations for <code>scale</code> and <code>translateY</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  handleLayoutPosition: function(img, position) {
</span><span class='line'>    this._imgLayouts[img] = {
</span><span class='line'>      left: position.nativeEvent.layout.x,
</span><span class='line'>      right: position.nativeEvent.layout.x + position.nativeEvent.layout.width
</span><span class='line'>    }
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>Here we setup a map, we&rsquo;ll set the <code>left</code> which is just the relative <code>x</code> coordinate, then setup our <code>right</code> which is <code>x + width</code>.</p>

<h2>Add in hover abilities</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  onPanResponderMove: (evt, gestureState) =&gt; {
</span><span class='line'>    var hoveredImg = this.getHoveredImg(Math.ceil(evt.nativeEvent.locationX));
</span><span class='line'>
</span><span class='line'>    if (hoveredImg && this._hoveredImg !== hoveredImg) {
</span><span class='line'>      this.animateSelected(this._imageAnimations[hoveredImg])
</span><span class='line'>    }
</span><span class='line'>    if (this._hoveredImg !== hoveredImg && this._hoveredImg) {
</span><span class='line'>      this.animateFromSelect(this._imageAnimations[this._hoveredImg]);
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    this._hoveredImg = hoveredImg;
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>We just do some basic logic here. If we have a <code>hoveredImg</code> and it&rsquo;s different than before, then call the animate function to make the image slide and scale up.
Also if we have a current <code>this._hoveredImg</code> and it&rsquo;s different then that means there is a new hovered image, so lets animate the previous image and scale it back down.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  animateSelected: function(imgAnimations) {
</span><span class='line'>    Animated.parallel([
</span><span class='line'>      Animated.timing(imgAnimations.position, {
</span><span class='line'>        duration: 150,
</span><span class='line'>        toValue: -30
</span><span class='line'>      }),
</span><span class='line'>      Animated.timing(imgAnimations.scale, {
</span><span class='line'>        duration: 150,
</span><span class='line'>        toValue: 1.8
</span><span class='line'>      })
</span><span class='line'>    ]).start();
</span><span class='line'>  },
</span><span class='line'>  animateFromSelect: function(imgAnimations, cb) {
</span><span class='line'>    Animated.parallel([
</span><span class='line'>      Animated.timing(imgAnimations.position, {
</span><span class='line'>        duration: 50,
</span><span class='line'>        toValue: 0
</span><span class='line'>      }),
</span><span class='line'>      Animated.timing(imgAnimations.scale, {
</span><span class='line'>        duration: 50,
</span><span class='line'>        toValue: 1
</span><span class='line'>      })
</span><span class='line'>    ]).start(cb);
</span><span class='line'>  },
</span><span class='line'>  getHoveredImg: function(x) {
</span><span class='line'>    return Object.keys(this._imgLayouts).find((key) =&gt; {
</span><span class='line'>      return x &gt;= this._imgLayouts[key].left && x &lt;= this._imgLayouts[key].right;
</span><span class='line'>    })
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>Nothing too much here to call out. Our <code>getHoveredImg</code> function runs through our layouts, and just checks if the <code>x</code> coordinate of the finger press is between the <code>left</code> and <code>right</code>. If it finds one it returns the reaction id.</p>

<p>The <code>animateSelected</code> and <code>animatedFromSelect</code> both take one the image animation objects and applies different animations to each.</p>

<h2>Add in selection text</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  onPanResponderRelease: (evt, gestureState) =&gt; {
</span><span class='line'>    if (this._hoveredImg) {
</span><span class='line'>      this.animateFromSelect(this._imageAnimations[this._hoveredImg], this.close.bind(this, this.afterClose) )
</span><span class='line'>    } else {
</span><span class='line'>      this.close(this.afterClose);
</span><span class='line'>    }
</span><span class='line'>  }</span></code></pre></td></tr></table></div></figure>


<p>I had mentioned this before. On the release if we have a current selection, then we need to first animate the selected image back to it&rsquo;s original position, which we have <code>animateFromSelect</code> already. Then when that is complete the callback is called which is our close function, which has a callback to trigger after close.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  afterClose: function() {
</span><span class='line'>    if (this._hoveredImg) {
</span><span class='line'>      this.setState({
</span><span class='line'>        selected: this._hoveredImg
</span><span class='line'>      })
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    this._hoveredImg = '';
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>Our after close just sets some text of the hovered img and clears it. This may not be necessary for an actual app, but this is just so I can have some text to show a user they selected a reaction.</p>

<h2>Weird setup and styles</h2>

<p>I&rsquo;ll just point out some &ldquo;weird&rdquo; things I&rsquo;m doing to make things work correctly. Mainly rather than adding in the border on the <code>likeContainer</code> we need to add in 2 separate containers.</p>

<p>Our element structure</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Animated.View 
</span><span class='line'>            style={[styles.likeContainer, this.getLikeContainerStyle()]}
</span><span class='line'>          &gt;
</span><span class='line'>            &lt;View style={styles.borderContainer} /&gt;
</span><span class='line'>            &lt;View style={styles.imgContainer}&gt;
</span><span class='line'>              {this.getImages()}
</span><span class='line'>            &lt;/View&gt;
</span><span class='line'>          &lt;/Animated.View&gt;</span></code></pre></td></tr></table></div></figure>


<p>Our weird styling.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  likeContainer: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    left: -10,
</span><span class='line'>    top: -30,
</span><span class='line'>    padding: 5,
</span><span class='line'>    flex: 1,
</span><span class='line'>    backgroundColor: '#FFF',
</span><span class='line'>    borderColor: 'transparent',
</span><span class='line'>    borderWidth: 0,
</span><span class='line'>    borderRadius: 20,
</span><span class='line'>  },
</span><span class='line'>  borderContainer: {
</span><span class='line'>    backgroundColor: 'transparent',
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    left: 0,
</span><span class='line'>    right: 0,
</span><span class='line'>    top: 0,
</span><span class='line'>    bottom: 0,
</span><span class='line'>    borderWidth: 1,
</span><span class='line'>    borderColor: '#444',
</span><span class='line'>    borderRadius: 20
</span><span class='line'>  },
</span><span class='line'>  imgContainer: {
</span><span class='line'>    backgroundColor: 'transparent',
</span><span class='line'>    flexDirection: 'row',
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<p>The <code>borderContainer</code> is absolutely positioned inside of the <code>likeContainer</code>. The <code>borderContainer</code> is just that, a bunch of border data.</p>

<p>The <code>likeContainer</code> also has border radius, transparent border styling so that it is shaped perfectly for overflow when the images slide down.</p>

<h2>DONE</h2>

<p>And there we have it. This is by no means an exact replica. It needs some serious polish and also needs to add a delay before opening when the users presses. It&rsquo;s good enough for me though. So go forth and add reactions to your app!</p>

<p>I didn&rsquo;t do anything crazy and assumed it would work on android. There a few issues with it so I&rsquo;m not sure exactly what&rsquo;s going on.</p>

<h4>Check it out live on RNPlay <a href="https://rnplay.org/apps/lIVMng">https://rnplay.org/apps/lIVMng</a></h4>

<p>As stated before there are minor tweaks from the code to make it work with react .11, not entirely certain why there are differences but there are.</p>

<p><img src="http://i.imgur.com/dFLU8SI.gif" title="Neato" ></p>

<p>Full code here</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
<span class='line-number'>228</span>
<span class='line-number'>229</span>
<span class='line-number'>230</span>
<span class='line-number'>231</span>
<span class='line-number'>232</span>
<span class='line-number'>233</span>
<span class='line-number'>234</span>
<span class='line-number'>235</span>
<span class='line-number'>236</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var React = require('react-native');
</span><span class='line'>var {
</span><span class='line'>  StyleSheet,
</span><span class='line'>  Text,
</span><span class='line'>  Image,
</span><span class='line'>  View,
</span><span class='line'>  PanResponder,
</span><span class='line'>  TouchableOpacity,
</span><span class='line'>  Animated
</span><span class='line'>} = React;
</span><span class='line'>
</span><span class='line'>var images = [
</span><span class='line'>  {id: 'like', img: 'http://i.imgur.com/LwCYmcM.gif'},
</span><span class='line'>  {id: 'love', img: 'http://i.imgur.com/k5jMsaH.gif'},
</span><span class='line'>  {id: 'haha', img: 'http://i.imgur.com/f93vCxM.gif'},
</span><span class='line'>  {id: 'yay', img: 'http://i.imgur.com/a44ke8c.gif'},
</span><span class='line'>  {id: 'wow', img: 'http://i.imgur.com/9xTkN93.gif'},
</span><span class='line'>  {id: 'sad', img: 'http://i.imgur.com/tFOrN5d.gif'},
</span><span class='line'>  {id: 'angry', img: 'http://i.imgur.com/1MgcQg0.gif'}
</span><span class='line'>]
</span><span class='line'>
</span><span class='line'>var App = React.createClass({
</span><span class='line'>  getInitialState: function() {
</span><span class='line'>    return {
</span><span class='line'>      selected: '',
</span><span class='line'>      open: false
</span><span class='line'>    };
</span><span class='line'>  },
</span><span class='line'>  componentWillMount: function() {
</span><span class='line'>    this._imgLayouts = {};
</span><span class='line'>    this._imageAnimations = {};
</span><span class='line'>    this._hoveredImg = '';
</span><span class='line'>
</span><span class='line'>    this._scaleAnimation = new Animated.Value(0);
</span><span class='line'>
</span><span class='line'>    images.forEach((img) =&gt; {
</span><span class='line'>      this._imageAnimations[img.id] = {
</span><span class='line'>        position: new Animated.Value(55),
</span><span class='line'>        scale: new Animated.Value(1)
</span><span class='line'>      };
</span><span class='line'>    })
</span><span class='line'>
</span><span class='line'>    this._panResponder = PanResponder.create({
</span><span class='line'>      onStartShouldSetPanResponder: (evt, gestureState) =&gt; true,
</span><span class='line'>      onStartShouldSetPanResponderCapture: (evt, gestureState) =&gt; true,
</span><span class='line'>      onMoveShouldSetPanResponder: (evt, gestureState) =&gt; true,
</span><span class='line'>      onMoveShouldSetPanResponderCapture: (evt, gestureState) =&gt; true,
</span><span class='line'>      onPanResponderGrant: this.open,
</span><span class='line'>      onPanResponderMove: (evt, gestureState) =&gt; {
</span><span class='line'>        var hoveredImg = this.getHoveredImg(Math.ceil(evt.nativeEvent.locationX));
</span><span class='line'>
</span><span class='line'>        if (hoveredImg && this._hoveredImg !== hoveredImg) {
</span><span class='line'>          this.animateSelected(this._imageAnimations[hoveredImg])
</span><span class='line'>        }
</span><span class='line'>        if (this._hoveredImg !== hoveredImg && this._hoveredImg) {
</span><span class='line'>          this.animateFromSelect(this._imageAnimations[this._hoveredImg]);
</span><span class='line'>        }
</span><span class='line'>
</span><span class='line'>        this._hoveredImg = hoveredImg;
</span><span class='line'>      },
</span><span class='line'>      onPanResponderRelease: (evt, gestureState) =&gt; {
</span><span class='line'>        if (this._hoveredImg) {
</span><span class='line'>          this.animateFromSelect(this._imageAnimations[this._hoveredImg], this.close.bind(this, this.afterClose) )
</span><span class='line'>        } else {
</span><span class='line'>          this.close(this.afterClose);
</span><span class='line'>        }
</span><span class='line'>      }
</span><span class='line'>    });
</span><span class='line'>  },
</span><span class='line'>  afterClose: function() {
</span><span class='line'>    if (this._hoveredImg) {
</span><span class='line'>      this.setState({
</span><span class='line'>        selected: this._hoveredImg
</span><span class='line'>      })
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    this._hoveredImg = '';
</span><span class='line'>  },
</span><span class='line'>  animateSelected: function(imgAnimations) {
</span><span class='line'>    Animated.parallel([
</span><span class='line'>      Animated.timing(imgAnimations.position, {
</span><span class='line'>        duration: 150,
</span><span class='line'>        toValue: -30
</span><span class='line'>      }),
</span><span class='line'>      Animated.timing(imgAnimations.scale, {
</span><span class='line'>        duration: 150,
</span><span class='line'>        toValue: 1.8
</span><span class='line'>      })
</span><span class='line'>    ]).start();
</span><span class='line'>  },
</span><span class='line'>  animateFromSelect: function(imgAnimations, cb) {
</span><span class='line'>    Animated.parallel([
</span><span class='line'>      Animated.timing(imgAnimations.position, {
</span><span class='line'>        duration: 50,
</span><span class='line'>        toValue: 0
</span><span class='line'>      }),
</span><span class='line'>      Animated.timing(imgAnimations.scale, {
</span><span class='line'>        duration: 50,
</span><span class='line'>        toValue: 1
</span><span class='line'>      })
</span><span class='line'>    ]).start(cb);
</span><span class='line'>  },
</span><span class='line'>  getHoveredImg: function(x) {
</span><span class='line'>    return Object.keys(this._imgLayouts).find((key) =&gt; {
</span><span class='line'>      return x &gt;= this._imgLayouts[key].left && x &lt;= this._imgLayouts[key].right;
</span><span class='line'>    })
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  getImageAnimationArray: function(toValue) {
</span><span class='line'>    return images.map((img) =&gt; {
</span><span class='line'>      return Animated.timing(this._imageAnimations[img.id].position, {
</span><span class='line'>        duration: 200,
</span><span class='line'>        toValue: toValue
</span><span class='line'>      })
</span><span class='line'>    });
</span><span class='line'>  },
</span><span class='line'>  open: function() {
</span><span class='line'>    Animated.parallel([
</span><span class='line'>      Animated.timing(this._scaleAnimation, {
</span><span class='line'>        duration: 100,
</span><span class='line'>        toValue: 1
</span><span class='line'>      }),
</span><span class='line'>      Animated.stagger(50, this.getImageAnimationArray(0))
</span><span class='line'>    ]).start(() =&gt; this.setState({open: true}));
</span><span class='line'>  },
</span><span class='line'>  close: function(cb) {
</span><span class='line'>    this.setState({open: false}, () =&gt; {
</span><span class='line'>      Animated.stagger(100,[
</span><span class='line'>        Animated.parallel(this.getImageAnimationArray(55, 0).reverse() ),
</span><span class='line'>        Animated.timing(this._scaleAnimation, {
</span><span class='line'>          duration: 100,
</span><span class='line'>          toValue: 0
</span><span class='line'>        })
</span><span class='line'>      ]).start(cb);
</span><span class='line'>    })
</span><span class='line'>  },
</span><span class='line'>  handleLayoutPosition: function(img, position) {
</span><span class='line'>    this._imgLayouts[img] = {
</span><span class='line'>      left: position.nativeEvent.layout.x,
</span><span class='line'>      right: position.nativeEvent.layout.x + position.nativeEvent.layout.width
</span><span class='line'>    }
</span><span class='line'>  },
</span><span class='line'>  getImages: function() {
</span><span class='line'>    return images.map((img) =&gt; {
</span><span class='line'>      return (
</span><span class='line'>        &lt;Animated.Image 
</span><span class='line'>          onLayout={this.handleLayoutPosition.bind(this, img.id)}
</span><span class='line'>          key={img.id} 
</span><span class='line'>          source={{uri: img.img}} 
</span><span class='line'>          style={[
</span><span class='line'>              styles.img,
</span><span class='line'>              {
</span><span class='line'>                transform: [
</span><span class='line'>                  {scale: this._imageAnimations[img.id].scale},
</span><span class='line'>                  {translateY: this._imageAnimations[img.id].position}
</span><span class='line'>                ]
</span><span class='line'>              }
</span><span class='line'>          ]} 
</span><span class='line'>        /&gt;
</span><span class='line'>      );
</span><span class='line'>    })
</span><span class='line'>  },
</span><span class='line'>  getLikeContainerStyle: function() {
</span><span class='line'>    return {
</span><span class='line'>            transform: [{scaleY: this._scaleAnimation}],
</span><span class='line'>            overflow: this.state.open ? 'visible': 'hidden',
</span><span class='line'>          };
</span><span class='line'>  },
</span><span class='line'>  render: function() {
</span><span class='line'>    return (
</span><span class='line'>      &lt;View style={styles.container}&gt;
</span><span class='line'>        &lt;View
</span><span class='line'>          style={styles.center}
</span><span class='line'>          {...this._panResponder.panHandlers}
</span><span class='line'>        &gt;
</span><span class='line'>          &lt;Text&gt;Like&lt;/Text&gt;
</span><span class='line'>          &lt;Text&gt;You selected: {this.state.selected}&lt;/Text&gt;
</span><span class='line'>          &lt;Animated.View 
</span><span class='line'>            style={[styles.likeContainer, this.getLikeContainerStyle()]}
</span><span class='line'>          &gt;
</span><span class='line'>            &lt;View style={styles.borderContainer} /&gt;
</span><span class='line'>            &lt;View style={styles.imgContainer}&gt;
</span><span class='line'>              {this.getImages()}
</span><span class='line'>            &lt;/View&gt;
</span><span class='line'>          &lt;/Animated.View&gt;
</span><span class='line'>        &lt;/View&gt;
</span><span class='line'>      &lt;/View&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>var styles = StyleSheet.create({
</span><span class='line'>  container: {
</span><span class='line'>    flex: 1,
</span><span class='line'>  },
</span><span class='line'>  center: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    left: 50,
</span><span class='line'>    top: 300
</span><span class='line'>  },
</span><span class='line'>  likeContainer: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    left: -10,
</span><span class='line'>    top: -30,
</span><span class='line'>    padding: 5,
</span><span class='line'>    flex: 1,
</span><span class='line'>    backgroundColor: '#FFF',
</span><span class='line'>    borderColor: 'transparent',
</span><span class='line'>    borderWidth: 0,
</span><span class='line'>    borderRadius: 20,
</span><span class='line'>  },
</span><span class='line'>  borderContainer: {
</span><span class='line'>    backgroundColor: 'transparent',
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    left: 0,
</span><span class='line'>    right: 0,
</span><span class='line'>    top: 0,
</span><span class='line'>    bottom: 0,
</span><span class='line'>    borderWidth: 1,
</span><span class='line'>    borderColor: '#444',
</span><span class='line'>    borderRadius: 20
</span><span class='line'>  },
</span><span class='line'>  imgContainer: {
</span><span class='line'>    backgroundColor: 'transparent',
</span><span class='line'>    flexDirection: 'row',
</span><span class='line'>  },
</span><span class='line'>  img: {
</span><span class='line'>    marginLeft: 5,
</span><span class='line'>    marginRight: 5,
</span><span class='line'>    width: 30,
</span><span class='line'>    height: 30,
</span><span class='line'>    overflow: 'visible'
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = App;</span></code></pre></td></tr></table></div></figure>



</div>
        
	</div>
	<div>
    	


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/animated/'>animated</a>, <a class='category' href='/blog/categories/facebook/'>facebook</a>, <a class='category' href='/blog/categories/gif/'>gif</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-native/'>react-native</a>, <a class='category' href='/blog/categories/reactions/'>reactions</a>
	


    	
	</div>
	
</article>
<!-- END OF _includes/article.html -->


<footer style="margin-top: 10px;">
    <div id="post-author">
	<div class="post-author-content" style="width: 70%; display: inline-block;">
		<p style="font-size: 16px;">
			If you ever want further explanation, want to see a particular type of tutorial, or to contact me for whatever reason you can drop me a line on twitter <a href="http://twitter.com/browniefed">@browniefed</a> or email me at <a href="mailto:browniefed@gmail.com">browniefed@gmail.com</a>
		</p>
	</div>
</div>
</footer>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


<!-- END OF _/layouts/post.html -->

		
			<footer>
				Copyright &copy; 2016

	Jason Brown


			</footer>
			
		</div> <!-- // .wrap -->
          

<script type="text/javascript">
      var disqus_shortname = 'browniefedblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://browniefed.com/blog/react-native-how-to-make-facebook-reactions/';
        var disqus_url = 'http://browniefed.com/blog/react-native-how-to-make-facebook-reactions/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


	</body>
	<script>
		$(document).ready(function() {
			// Make images center
			$('p:has(img)').css('text-align', 'center');
			
			// Add the image's title attribute as a caption
			$('p:has(img)').append(function () {
				return '<div class="caption">' + $('img', this).attr('title') + '</div>';
			});
			
			// Prettify code
			$('code').addClass('prettyprint');
			$('pre code').addClass('linenums');
			
			// Copy to clipboard with button
			$('pre:has(code)').prepend(function(){
				return '<div class="clip-btn">copy to clipboard</div>';
			});
			$('.clip-btn').zclip({
				path:'/js/ZeroClipboard.swf',
				copy: function() {
                    return $(this).next('code').text().split("\n").join("\r\n")
                },
				afterCopy: function(){
					$(this).replaceWith('<div class="clip-btn">copied!');
				}
			});
		});
	</script>
    

<script type="text/javascript">
      var disqus_shortname = 'browniefedblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://browniefed.com/blog/react-native-how-to-make-facebook-reactions/';
        var disqus_url = 'http://browniefed.com/blog/react-native-how-to-make-facebook-reactions/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


</html>
<!-- END OF _layouts/default.html -->
