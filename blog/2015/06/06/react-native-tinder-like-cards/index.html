
<!doctype html>
<!-- START OF _layouts/default.html -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" >
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<meta content="" name="description">
		<meta content="JavaScript Without Grammar" name="author">
		
		<title>React-Native Tinder like cards &mdash; JavaScript Without Grammar</title>
		
		<!-- Styles -->
		<link href="/stylesheets/main.css" rel="stylesheet">
		
		<!-- Google webfonts -->
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Cousine">
		
		<!-- jQuery and plugins -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script src="/js/jquery.zclip.min.js"></script>
		
		<!-- Syntax highlighter -->
		<link href="/stylesheets/prettify-hemisu.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="/js/prettify.js"></script>
		
		<!--<link href="http://feeds.feedburner.com/turkeltaub" rel="alternate" title="JavaScript Without Grammar" type="application/rss+xml" />-->
		
	</head>
	<body onload="prettyPrint()">
	
		<div class="wrap">
	
			<header>
				<div class="title"><a href="/">JavaScript Without Grammar</a></div>
								
								<div class="navi">
									<ul>
										<li><a href="/">Blog</a></li>
										<li><a href="/blog/archives">Archives</a></li>
										<li><a href="/about">About</a></li>
										<li><a href="http://github.com/browniefed">Github</a></li>
										<li><a href="http://twitter.com/browniefed">Twitter</a></li>
										<li><a href="http://browniefed.com">Portfolio?</a></li>
									<ul>
								</div> <!-- // .navi -->
			</header>
		
				<!-- START OF _layouts/post.html -->

<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/blog/2015/06/06/react-native-tinder-like-cards/">React-Native Tinder like cards</a></h1>
		<time>06 June 2015</time>
	</header>
	<div class="content">
		<h2>Intro</h2>

<p>The test of all good frameworks is how easy it is to implement Tinder right? Well with <code>react-native</code> we do get the benefits of flex box as well as some transforms which we&rsquo;ll take advantage of.</p>

<p>We don&rsquo;t have access to an easy physics, even though they were added in IOS7. If you&rsquo;d like physics you can use some JavaScript libraries like <code>rebound</code> <a href="https://github.com/facebook/rebound-js">https://github.com/facebook/rebound-js</a> from Facebook, or any others that don&rsquo;t require a DOM.</p>

<p>What we&rsquo;ll make</p>

<p><img src="http://i.imgur.com/tTcT7xJ.png" title="End Result" ></p>

<h2>Concept</h2>

<p>We&rsquo;ll create a card. On touch press/grant we&rsquo;ll figure out the offset of the card to the touch and start generating the transform to move/rotate the card.</p>

<p>Well use the <code>style</code> <code>transform</code> property which we can find documentation here <a href="https://facebook.github.io/react-native/docs/transforms.html#proptypes">https://facebook.github.io/react-native/docs/transforms.html#proptypes</a>. However documentation is a little skimpy.</p>

<p>It&rsquo;s mostly straight forward once you dive in though.</p>

<h2>What we won&rsquo;t do.</h2>

<p>Physics. You can implement a bouncy spring system, but we&rsquo;ll keep it simple with a drag concept.</p>

<h2>Create a basic card</h2>

<p>We&rsquo;ll create a basic wrapper container and then create a card View.
We&rsquo;ll center everyting inside of our container using <code>alignItems</code> and <code>justifyContent</code> both <code>center</code>
Our card will just be <code>300</code> by <code>300</code>, with a little padding, and border.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>render: function() {
</span><span class='line'>
</span><span class='line'>    return (
</span><span class='line'>      &lt;View style={styles.container}&gt;
</span><span class='line'>          &lt;View
</span><span class='line'>            style={styles.card}
</span><span class='line'>          &gt;
</span><span class='line'>          &lt;/View&gt;
</span><span class='line'>      &lt;/View&gt;
</span><span class='line'>    );
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>var styles = StyleSheet.create({
</span><span class='line'>  container: {
</span><span class='line'>    flex: 1,
</span><span class='line'>    alignItems: 'center',
</span><span class='line'>    justifyContent: 'center'
</span><span class='line'>  },
</span><span class='line'>  card: {
</span><span class='line'>    borderWidth: 3,
</span><span class='line'>    borderRadius: 3,
</span><span class='line'>    borderColor: '#000',
</span><span class='line'>    width: 300,
</span><span class='line'>    height: 300,
</span><span class='line'>    padding: 10
</span><span class='line'>  }
</span><span class='line'>  });
</span></code></pre></td></tr></table></div></figure>


<p>Now that we have a generic card we can make it look a little nicer with an image, and some text.</p>

<h2>Add an Image/Text to card</h2>

<p>We&rsquo;ll add an image and set to a particular height. There is a current issue in <code>react-native</code> that doesn&rsquo;t maintain aspect ratio but that will be taken care of eventually.</p>

<p>We wrap our <code>Text</code> elements in <code>View</code> and position each <code>Text</code> item on the left and right.
There is a way to do this with flexbox but positioning like this is a little more explicit.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>render: function() {
</span><span class='line'>
</span><span class='line'>    return (
</span><span class='line'>      &lt;View style={styles.container}&gt;
</span><span class='line'>          &lt;View
</span><span class='line'>            style={styles.card}
</span><span class='line'>          &gt;
</span><span class='line'>            &lt;Image source= style={styles.cardImage} /&gt;
</span><span class='line'>            &lt;View&gt;
</span><span class='line'>              &lt;Text style={styles.textLeft}&gt;Rabbit, 10&lt;/Text&gt;
</span><span class='line'>              &lt;Text style={styles.textRight}&gt;1 Connection&lt;/Text&gt;
</span><span class='line'>            &lt;/View&gt;
</span><span class='line'>          &lt;/View&gt;
</span><span class='line'>      &lt;/View&gt;
</span><span class='line'>    );
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>var styles = StyleSheet.create({
</span><span class='line'>  container: {
</span><span class='line'>    flex: 1,
</span><span class='line'>    alignItems: 'center',
</span><span class='line'>    justifyContent: 'center'
</span><span class='line'>  },
</span><span class='line'>  card: {
</span><span class='line'>    borderWidth: 3,
</span><span class='line'>    borderRadius: 3,
</span><span class='line'>    borderColor: '#000',
</span><span class='line'>    width: 300,
</span><span class='line'>    height: 300,
</span><span class='line'>    padding: 10
</span><span class='line'>  },
</span><span class='line'>  cardImage: {
</span><span class='line'>    height: 260,
</span><span class='line'>  },
</span><span class='line'>  textLeft: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    left:0,
</span><span class='line'>    top:0
</span><span class='line'>  },
</span><span class='line'>  textRight: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    right: 0,
</span><span class='line'>    top: 0
</span><span class='line'>  }
</span><span class='line'>});
</span></code></pre></td></tr></table></div></figure>


<h2>Things to know about style</h2>

<p>Alright so there seems to be a lack of documentation around style in general. But <code>style</code> actually can receive an array.</p>

<p>You are capable of specifying a default layout, however doing overrides. For example take our card layout.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  card: {
</span><span class='line'>    borderWidth: 3,
</span><span class='line'>    borderRadius: 3,
</span><span class='line'>    borderColor: '#000',
</span><span class='line'>    width: 300,
</span><span class='line'>    height: 300,
</span><span class='line'>    padding: 10
</span><span class='line'>  }
</span></code></pre></td></tr></table></div></figure>


<p>This gets applied, but what if at some point in time we wanted to change the <code>borderColor</code> based on <code>state</code>.
Well we just override it on the style attribute like so</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;View style={[styles.card, {borderColor: '#CCC'}]} /&gt;</span></code></pre></td></tr></table></div></figure>


<p>So now the borderColor has a default but can be changed by just passing in an object.</p>

<p>This goes for <code>transform</code> as well which will set us up for the next challenge, actually dragging.</p>

<h2>Add in Drag</h2>

<p>We&rsquo;ll use the gesture responder system. The robustness is great, however I was expecting a little more information like deltas over the course of each drag update. We aren&rsquo;t given that to my knowledge so we&rsquo;ll computer it ourselves.</p>

<p>How the gesture system works is it must ask each element that has a gesture responder if it should be allowed to drag or not. In our case we have one element and minimal logic so we&rsquo;ll just return true. However at any point you can cancel a gesture by returning false.</p>

<p>In our case you need to respond <code>true</code> to <code>onStartShouldSetResponder</code> and then each subsequent move <code>onMoveShouldSetResponder</code>. If those return true then it will call <code>onResponderMove</code> each time with the new event.</p>

<p>We&rsquo;ll use <code>_onStartShouldSetResponder</code> function to setup our initial drag. Each subsequent move we subtract and get the delta of the move.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  getInitialState: fucntion() {
</span><span class='line'>    return {
</span><span class='line'>      x: 0,
</span><span class='line'>      y: 0
</span><span class='line'>    }
</span><span class='line'>  },
</span><span class='line'>  setPosition: function(e) {
</span><span class='line'>    //Update our state with the deltaX/deltaY of the movement
</span><span class='line'>    this.setState({
</span><span class='line'>      x: this.state.x + (e.nativeEvent.pageX - this.drag.x),
</span><span class='line'>      y: this.state.y + (e.nativeEvent.pageY - this.drag.y)
</span><span class='line'>    });
</span><span class='line'>    //Set our drag to be the new position so our delta can be calculated next time correctly
</span><span class='line'>    this.drag.x = e.nativeEvent.pageX;
</span><span class='line'>    this.drag.y = e.nativeEvent.pageY;
</span><span class='line'>  },
</span><span class='line'>  resetPosition: function(e) {
</span><span class='line'>    this.dragging = false;
</span><span class='line'>    //Reset on release
</span><span class='line'>    this.setState({
</span><span class='line'>      x: 0,
</span><span class='line'>      y: 0,
</span><span class='line'>    })
</span><span class='line'>  },
</span><span class='line'>  _onStartShouldSetResponder: function(e) {
</span><span class='line'>    this.dragging = true;
</span><span class='line'>    //Setup initial drag coordinates
</span><span class='line'>    this.drag = {
</span><span class='line'>      x: e.nativeEvent.pageX,
</span><span class='line'>      y: e.nativeEvent.pageY
</span><span class='line'>    }
</span><span class='line'>    return true;
</span><span class='line'>  },
</span><span class='line'>  _onMoveShouldSetResponder: function(e) {
</span><span class='line'>    return true;
</span><span class='line'>  },
</span><span class='line'>  getCardStyle: function() {
</span><span class='line'>    var transform = [{translateX: this.state.x}, {translateY: this.state.y}];
</span><span class='line'>    return {transform: transform};
</span><span class='line'>  },
</span><span class='line'>  render: function() {
</span><span class='line'>
</span><span class='line'>    return (
</span><span class='line'>      &lt;View style={styles.container}&gt;
</span><span class='line'>          &lt;View
</span><span class='line'>            onResponderMove={this.setPosition}
</span><span class='line'>            onResponderRelease={this.resetPosition}
</span><span class='line'>            onStartShouldSetResponder={this._onStartShouldSetResponder}
</span><span class='line'>            onMoveShouldSetResponder={this._onMoveShouldSetResponder}
</span><span class='line'>            style={[styles.card, this.getCardStyle()]}
</span><span class='line'>          &gt;
</span><span class='line'>            &lt;Image source= style={styles.cardImage} /&gt;
</span><span class='line'>            &lt;View style={styles.cardTextContainer}&gt;
</span><span class='line'>              &lt;Text style={styles.textLeft}&gt;Rabbit, 10&lt;/Text&gt;
</span><span class='line'>              &lt;Text style={styles.textRight}&gt;1 Connection&lt;/Text&gt;
</span><span class='line'>            &lt;/View&gt;
</span><span class='line'>          &lt;/View&gt;
</span><span class='line'>      &lt;/View&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});</span></code></pre></td></tr></table></div></figure>


<p>So now when a user press down on our card and starts dragging it&rsquo;ll move around. On release it&rsquo;ll snap back to position <code>0,0</code>.</p>

<p>You can see we use the <code>translateX</code> and <code>translateY</code> transform properties. These will cause the ability for the card to be dragged around but not have to make it position absolute.</p>

<h2>Add in Rotate</h2>

<p>With Tinder and other card style systems as you drag the card left or right it will slightly rotate. It also rotates differently depending on the position you grab the card from (generally top or bottom).</p>

<p>The <code>transform</code> property on style also has a <code>rotate</code> option. This seems weird but it takes a string. That string can be something like <code>30deg</code> or <code>.05rad</code>. So it offers some flexibility. We&rsquo;ll use <code>degrees</code> since it&rsquo;s the easiest to comprehend.</p>

<p>We don&rsquo;t need to add anything to the view, just determine if we grabbed the card on the <code>top</code> or the <code>bottom</code>. Then depending on the offset drag make it rotate more as we move.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//Top of file
</span><span class='line'>var Dimensions = require('Dimensions');
</span><span class='line'>var windowSize = Dimensions.get('window');
</span><span class='line'>
</span><span class='line'>//...
</span><span class='line'>  _onStartShouldSetResponder: function(e) {
</span><span class='line'>    this.dragging = true;
</span><span class='line'>
</span><span class='line'>    this.rotateTop = e.nativeEvent.locationY &lt;= 150;
</span><span class='line'>
</span><span class='line'>    this.drag = {
</span><span class='line'>      x: e.nativeEvent.pageX,
</span><span class='line'>      y: e.nativeEvent.pageY
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    return true;
</span><span class='line'>  },
</span><span class='line'>  getRotationDegree: function(rotateTop, x) {
</span><span class='line'>    var rotation = ( (x/windowSize.width) * 100)/3;
</span><span class='line'>
</span><span class='line'>    var rotate = rotateTop ? 1 : -1,
</span><span class='line'>        rotateString = (rotation * rotate) + 'deg';
</span><span class='line'>
</span><span class='line'>    return rotateString;
</span><span class='line'>  },
</span><span class='line'>  getCardStyle: function() {
</span><span class='line'>    var transform = [{translateX: this.state.x}, {translateY: this.state.y}];
</span><span class='line'>
</span><span class='line'>    if (this.dragging) {
</span><span class='line'>        transform.push({rotate: this.getRotationDegree(this.rotateTop, this.state.x)})
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    return {transform: transform};
</span><span class='line'>  }</span></code></pre></td></tr></table></div></figure>


<p>So we modify <code>_onStartShouldSetResponder</code> to determine wheter we grabbed top or bottom. We use the <code>locationY</code> property which is the point on the card that was touched. Since the card dimensions are <code>300x300</code> that means if the card was touched anywhere between <code>0 to 150</code> then it was touched on top.</p>

<p>Our <code>getCardStyle</code> will push a <code>rotate</code> object on if we are dragging.</p>

<p>We need to know how far around the screen you have dragged it from the center point.
So we get the screen dimensions, divide the width by the <code>pageX</code> coordinate which is just position of the element relative to the entire screen. To convert to degrees we multiply by <code>100</code> and divide by <code>3</code> to reduce the rotation.</p>

<p>If we touched on the bottom then we want to do a reverse rotation so we multiply by <code>-1  and return a string that would return a value like</code>20.123deg<code>or</code>-20.123deg`.</p>

<h2>Add in Release Text</h2>

<p>Great we have dragging, we have rotating. Now how do we know which way they let go?
Well we can use those window dimensions and the <code>pageX</code> movement to determine if the card was released on the left or right.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  resetPosition: function(e) {
</span><span class='line'>    this.dragging = false;
</span><span class='line'>    var left = e.nativeEvent.pageX &lt; (windowSize.width/2),
</span><span class='line'>        displayText = left ? 'Released left' : 'Released right';
</span><span class='line'>
</span><span class='line'>    this.setState({
</span><span class='line'>      x: 0,
</span><span class='line'>      y: 0,
</span><span class='line'>      lastDragDirectio: displayText
</span><span class='line'>    })
</span><span class='line'>  },</span></code></pre></td></tr></table></div></figure>


<h2>Final Code</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'use strict';
</span><span class='line'>
</span><span class='line'>var React = require('react-native');
</span><span class='line'>var Dimensions = require('Dimensions');
</span><span class='line'>var windowSize = Dimensions.get('window');
</span><span class='line'>
</span><span class='line'>var {
</span><span class='line'>  StyleSheet,
</span><span class='line'>  AppRegistry,
</span><span class='line'>  Text,
</span><span class='line'>  View,
</span><span class='line'>  ActivityIndicatorIOS,
</span><span class='line'>  Image,
</span><span class='line'>  Navigator,
</span><span class='line'>  TouchableOpacity,
</span><span class='line'>  Animation
</span><span class='line'>} = React;
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>var Application = React.createClass({
</span><span class='line'>  getInitialState: function() {
</span><span class='line'>    return {
</span><span class='line'>      x: 0,
</span><span class='line'>      y: 0,
</span><span class='line'>      lastDragDirectio: 'Drag and Release'
</span><span class='line'>    }
</span><span class='line'>  },
</span><span class='line'>  setPosition: function(e) {
</span><span class='line'>    this.setState({
</span><span class='line'>      x: this.state.x + (e.nativeEvent.pageX - this.drag.x),
</span><span class='line'>      y: this.state.y + (e.nativeEvent.pageY - this.drag.y)
</span><span class='line'>    });
</span><span class='line'>    this.drag.x = e.nativeEvent.pageX;
</span><span class='line'>    this.drag.y = e.nativeEvent.pageY;
</span><span class='line'>  },
</span><span class='line'>  resetPosition: function(e) {
</span><span class='line'>    this.dragging = false;
</span><span class='line'>    var left = e.nativeEvent.pageX &lt; (windowSize.width/2),
</span><span class='line'>        displayText = left ? 'Released left' : 'Released right';
</span><span class='line'>
</span><span class='line'>    this.setState({
</span><span class='line'>      x: 0,
</span><span class='line'>      y: 0,
</span><span class='line'>      lastDragDirectio: displayText
</span><span class='line'>    })
</span><span class='line'>  },
</span><span class='line'>  getRotationDegree: function(rotateTop, x) {
</span><span class='line'>    var rotation = ( (x/windowSize.width) * 100)/3;
</span><span class='line'>
</span><span class='line'>    var rotate = rotateTop ? 1 : -1,
</span><span class='line'>        rotateString = (rotation * rotate) + 'deg';
</span><span class='line'>
</span><span class='line'>    return rotateString;
</span><span class='line'>  },
</span><span class='line'>  getCardStyle: function() {
</span><span class='line'>    var transform = [{translateX: this.state.x}, {translateY: this.state.y}];
</span><span class='line'>
</span><span class='line'>    if (this.dragging) {
</span><span class='line'>        transform.push({rotate: this.getRotationDegree(this.rotateTop, this.state.x)})
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    return {transform: transform};
</span><span class='line'>  },
</span><span class='line'>  _onStartShouldSetResponder: function(e) {
</span><span class='line'>    this.dragging = true;
</span><span class='line'>
</span><span class='line'>    this.rotateTop = e.nativeEvent.locationY &lt;= 150;
</span><span class='line'>
</span><span class='line'>    this.drag = {
</span><span class='line'>      x: e.nativeEvent.pageX,
</span><span class='line'>      y: e.nativeEvent.pageY
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    return true;
</span><span class='line'>  },
</span><span class='line'>  _onMoveShouldSetResponder: function(e) {
</span><span class='line'>    return true;
</span><span class='line'>  },
</span><span class='line'>  render: function() {
</span><span class='line'>
</span><span class='line'>    return (
</span><span class='line'>      &lt;View style={styles.container}&gt;
</span><span class='line'>          &lt;View
</span><span class='line'>            onResponderMove={this.setPosition}
</span><span class='line'>            onResponderRelease={this.resetPosition}
</span><span class='line'>            onStartShouldSetResponder={this._onStartShouldSetResponder}
</span><span class='line'>            onMoveShouldSetResponder={this._onMoveShouldSetResponder}
</span><span class='line'>            style={[styles.card, this.getCardStyle()]}
</span><span class='line'>          &gt;
</span><span class='line'>            &lt;Image source= style={styles.cardImage} /&gt;
</span><span class='line'>            &lt;View style={styles.cardTextContainer}&gt;
</span><span class='line'>              &lt;Text style={styles.textLeft}&gt;Rabbit, 10&lt;/Text&gt;
</span><span class='line'>              &lt;Text style={styles.textRight}&gt;1 Connection&lt;/Text&gt;
</span><span class='line'>            &lt;/View&gt;
</span><span class='line'>          &lt;/View&gt;
</span><span class='line'>          &lt;View style={styles.dragText}&gt;
</span><span class='line'>            &lt;Text&gt;{this.state.lastDragDirectio}&lt;/Text&gt;
</span><span class='line'>          &lt;/View&gt;
</span><span class='line'>      &lt;/View&gt;
</span><span class='line'>    );
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>var styles = StyleSheet.create({
</span><span class='line'>  container: {
</span><span class='line'>    flex: 1,
</span><span class='line'>    alignItems: 'center',
</span><span class='line'>    justifyContent: 'center'
</span><span class='line'>  },
</span><span class='line'>  dragText: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    bottom: 0,
</span><span class='line'>    left: 0
</span><span class='line'>  },
</span><span class='line'>  card: {
</span><span class='line'>    borderWidth: 3,
</span><span class='line'>    borderRadius: 3,
</span><span class='line'>    borderColor: '#000',
</span><span class='line'>    width: 300,
</span><span class='line'>    height: 300,
</span><span class='line'>    padding: 10
</span><span class='line'>  },
</span><span class='line'>  cardImage: {
</span><span class='line'>    height: 260,
</span><span class='line'>  },
</span><span class='line'>  textLeft: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    left:0,
</span><span class='line'>    top:0
</span><span class='line'>  },
</span><span class='line'>  textRight: {
</span><span class='line'>    position: 'absolute',
</span><span class='line'>    right: 0,
</span><span class='line'>    top: 0
</span><span class='line'>  }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>module.exports = Application;</span></code></pre></td></tr></table></div></figure>


<h2>Result</h2>

<p><img src="http://i.imgur.com/q7siPyO.gif" title="End Result" ></p>

<p>You can check out and play with the end result here.</p>

<h2>Preview Online!</h2>

<p>Thanks to React Native Playground you can play with this code live online.</p>

<p><a href="https://rnplay.org/apps/6uPJug">https://rnplay.org/apps/6uPJug</a></p>

<p>Your homework can be to add a bounce when the card is released.</p>

	</div>
	<div>
		


		



  
		
			Tagged under
		
    <a class='category' href='/blog/categories/cards/'>cards</a>, <a class='category' href='/blog/categories/react/'>react</a>, <a class='category' href='/blog/categories/react-native/'>react-native</a>, <a class='category' href='/blog/categories/swipe/'>swipe</a>, <a class='category' href='/blog/categories/tinder/'>tinder</a>
	


	
	</div>
	
</article>
<!-- END OF _includes/article.html -->


  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

<div class="article-wrap">
<footer style="margin-top: 10px;">
    <div id="post-author">
	<div class="post-author-image" style="width: 20%; display: inline-block;">
		<img src="/images/author.jpeg" style="max-width: 150px; width: 100%;">
	</div>
	<div class="post-author-content" style="width: 70%; display: inline-block;">
		<p>
			My name is Jason Brown, I'm an entrepreneur, developer, and general hobbyist. I work full time as a front end developer and develop in anything, and everything in my free time. If you ever want an explanation or to contact me for whatever reason you can drop me a line at <a href="http://twitter.com/browniefed">@browniefed</a> or email me at ( <a href="mailto:browniefed@gmail.com">browniefed@gmail.com</a> )
		</p>
	</div>
</div>
</footer>
</div>
<!-- END OF _/layouts/post.html -->

		
			<footer>
				Copyright &copy; 2015

	Jason Brown


			</footer>
			
		</div> <!-- // .wrap -->
          

<script type="text/javascript">
      var disqus_shortname = 'browniefedblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://browniefed.com/blog/2015/06/06/react-native-tinder-like-cards/';
        var disqus_url = 'http://browniefed.com/blog/2015/06/06/react-native-tinder-like-cards/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


	</body>
	<script>
		$(document).ready(function() {
			// Make images center
			$('p:has(img)').css('text-align', 'center');
			
			// Add the image's title attribute as a caption
			$('p:has(img)').append(function () {
				return '<div class="caption">' + $('img', this).attr('title') + '</div>';
			});
			
			// Prettify code
			$('code').addClass('prettyprint');
			$('pre code').addClass('linenums');
			
			// Copy to clipboard with button
			$('pre:has(code)').prepend(function(){
				return '<div class="clip-btn">copy to clipboard</div>';
			});
			$('.clip-btn').zclip({
				path:'/js/ZeroClipboard.swf',
				copy: $(this).next('code').text(),
				afterCopy: function(){
					$(this).replaceWith('<div class="clip-btn">copied!');
					}
			});
		});
	</script>
    

<script type="text/javascript">
      var disqus_shortname = 'browniefedblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://browniefed.com/blog/2015/06/06/react-native-tinder-like-cards/';
        var disqus_url = 'http://browniefed.com/blog/2015/06/06/react-native-tinder-like-cards/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


</html>
<!-- END OF _layouts/default.html -->
